<!DOCTYPE html>
<html>
    <head>
        <script src="js/jquery-3.2.1.min.js"></script>
        <script src="js/moment.js"></script>
        <script src="js/bootstrap.js"></script>
        <script src="js/bootstrap-datetimepicker.js"></script>
        <script src="js/bootbox.min.js"></script>
        <script src="js/placeholder.js"></script>
        <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
        <link rel="stylesheet" type="text/css" href="css/myStyle.css">
        <link rel="stylesheet" type="text/css" href="css/bootstrap-datetimepicker.css">
        <link rel="stylesheet" type="text/css" href="css/bootstrap-arrow-buttons.css">
    </head>
    <body>
        <div id="wrap">
            <!-- Top menu bar begins -->
            <div class='navbar navbar-default navbar-static-top'>
                <div class="container">
                    <!-- Logo begins -->
                    <a href='#' class='navbar-brand'>
                        <text style="color:rgb(44,164,176)">
                            Ne</text><text style="color:red">x</text><text style="color:rgb(44,164,176)">peria DMAN Golf Society
                        </text>
                    </a>
                    <!-- Logo ends -->
                    <ul class="nav nav-pills navbar-right"> 
                        <!-- Log in menu begins -->
                        <li id="login-menu">
                            <a href="#"  data-toggle="dropdown">Log in<span class="caret"></span></a>
                            <ul id="login-dp" class="dropdown-menu">
                                <li>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <form class="form" role="form" method="post" action="login" accept-charset="UTF-8" id="login-nav">
                                                <div class="form-group">
                                                    <label class="sr-only" for="loginUsername">
                                                        Username
                                                    </label>
                                                    <input type="text" class="form-control" id="loginUsername" placeholder="Username" required>
                                                </div>
                                                <div class="form-group">
                                                    <label class="sr-only" for="loginPassword">
                                                        Password
                                                    </label>
                                                        <input type="password" class="form-control" id="loginPassword" placeholder="Password" required>
                                                        <div class="help-block text-right">
                                                            <a href="">
                                                                 Forget the password ?
                                                            </a>
                                                        </div>
                                                </div>
                                                <div class="form-group">
                                                    <button id="loginbtn" type="button" class="btn btn-primary btn-block">
                                                        Sign in
                                                    </button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </li>
                        <!-- Log in menu ends -->
                        
                        <!-- Logged user menu begins -->
                        <li id="loggedin" style="display:none">
                            <a href="#" data-toggle="dropdown">
                                <span class="text" id="userMenuTitle">
                                    User
                                </span>
                                <span class="caret">
                                </span>
                            </a>
                            <ul id="userMenu" class="dropdown-menu">
                                <li>
                                    <a href="#accountsettings" id="accountsettingsLink">
                                        <span class="glyphicon glyphicon-cog pull-right">
                                        </span>
                                        <span class="dropdown-link-text" style="margin-right:40px">
                                            Account Settings
                                        </span>
                                    </a>
                                </li>
                                <li class="divider">
                                </li>
                                <li>
                                    <a href="#userstats" id="userstatsLink">
                                        <span class="glyphicon glyphicon-stats pull-right">
                                        </span>
                                        <span class="dropdown-link-text">
                                            User stats 
                                        </span>
                                    </a>
                                </li>
                                <li class="divider">
                                </li>
                                <li>
                                    <a href="#" id="logoutLink">
                                        <span class="glyphicon glyphicon-log-out pull-right">
                                        </span>
                                        <span class="dropdown-link-text">
                                            Log Out 
                                        </span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <!-- Logged user menu ends -->
                        <li>
                            <a href="#contact">
                                Contact
                            </a>
                        </li>
                    </ul>
                </div>
            </div>   
            <!-- Top menu bar ends -->

        <!-- Carousel begins -->
            <!-- Header Carousel, looped photos at top of the screen -->
            <header id="myCarousel" class="carousel slide" data-interval="10000" data-ride="carousel">
                
                <!-- Indicators , carousel skeleton-->
                <ol class="carousel-indicators">
                    <li data-target="#myCarousel" data-slide-to="0" class='active'></li>
                    <li data-target="#myCarousel" data-slide-to="1"></li>
                    <li data-target="#myCarousel" data-slide-to="2"></li>
                    <li data-target="#myCarousel" data-slide-to="3"></li>
                    <li data-target="#myCarousel" data-slide-to="4"></li>
                    <li data-target="#myCarousel" data-slide-to="5"></li>
                </ol>
                
                <!-- Wrapper for slides -->
                <div class="carousel-inner">
                    <div class="item active">
                        <img src="img/s1.png">
                        <div class="carousel-caption">
                            <h1></h1>
                        </div>
                    </div>

                    <div class="item">
                        <img src="img/s2.png">
                        <div class="carousel-caption">
                            <h1></h1>
                        </div>
                    </div>

                    <div class="item">
                        <img src="img/s3.png">
                        <div class="carousel-caption">
                            <h1></h1>
                        </div>
                    </div>

                    <div class="item">
                        <img src="img/s4.png">
                        <div class="carousel-caption">
                            <h1></h1>
                        </div>
                    </div>

                    <div class="item">
                        <img src="img/s5.png">
                        <div class="carousel-caption">
                            <h1></h1>
                        </div>
                    </div>
                    
                    <div class="item">
                        <img src="img/s6.png">
                        <div class="carousel-caption">
                            <h1></h1>
                        </div>
                    </div>
                    
                    <!-- Controls -->
                    <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                        <span class="icon-prev"></span>
                    </a>
                    <a class="right carousel-control" href="#myCarousel" data-slide="next">
                        <span class="icon-next"></span>
                    </a>
                </div>
            </header>
        <!-- Carousel ends -->
            
            <div class="container ">
                <div class="row" style="margin-top: 50px">
                    <div  class="col-md-3 text-center" style="float:left">
                        <ul class="list-group well" id="glofmenu">
                            <!-- Menu with general access begins -->
                            <li class="list-group-item" id="membershiplisting">
                                <a class="notop" href="javascript:void(0)">
                                    Membership
                                </a>
                            </li>
                            <li class="list-group-item" id="committee">
                                <a class="notop" href="javascript:void(0)">
                                    The Committee
                                </a>
                            </li>
                            <li class="list-group-item" id="societyeventslisting">
                                <a class="notop" href="javascript:void(0)">
                                    Society Events
                                </a>
                            </li>
                            <li class="list-group-item" id = "competitionresults">
                                <a class="notop" href="javascript:void(0)">
                                    Competition Results
                                </a>
                            </li>
                            <li class="list-group-item" id = "playeroftheyear">
                                <a class="notop" href="javascript:void(0)">
                                    Player of the Year
                                </a>
                            </li>
                        <!-- Menu with general access ends -->
                        </ul>
                        
                        <ul class="list-group well" id="adminpanel" style="display:none">
                        <!-- Menu with ADMIN access begins -->
                            <li class="list-group-item" id="addmemberLink">
                                <a class="notop" href="javascript:void(0)">
                                    Add Member
                                </a>
                            </li>
                            <li class="list-group-item" id="editmembersLink">
                                <a class="notop" href="javascript:void(0)">
                                    Edit Members
                                </a>
                            </li>
                            <li class="list-group-item" id="editcommitteeLink">
                                <a class="notop" href="javascript:void(0)">
                                    Edit Committee
                                </a>
                            </li>
                            <li class="list-group-item" id="createsocietyeventLink">
                                <a class="notop" href="javascript:void(0)">
                                    Add Society Event
                                </a>
                            </li>
                            <li class="list-group-item" id="editsocietyeventsLink">
                                <a class="notop" href="javascript:void(0)">
                                    Edit Society Events
                                </a>
                            </li>
                            <li class="list-group-item" id="addcompetitionresultsLink">
                                <a class="notop" href="javascript:void(0)">
                                    Add Competition Result
                                </a>
                            </li>
                            <li class="list-group-item" id="editcompetitionresultsLink">
                                <a class="notop" href="javascript:void(0)">
                                    Edit Competition Results
                                </a>
                            </li>
                        <!-- Menu with ADMIN access ends -->
                        </ul>
                    </div>
                    
                    <!-- committee list panel definition begins -->
                    <div class="col-md-9" >
                        <div id="welcome" class="text-center">
                            <div class="text-center well">
                                <h1>Welcome to Nexperia Golf Society Home Page!</h1>
                            </div>
                             <img class = "img-rounded" src="img/committee.png" alt=""  align="center">
                        </div>
                        
                        <div id="committeecontent" style="display:none">
                            <div class="well  text-center" >  
                                <img class = "img-rounded" src="img/committee.png" style="display:inline-block"  alt="" align="left"> 
                                <h1 style="display:inline-block">The Committee</h1> 
                                <img class = "img-rounded" style="display:inline-block" src="img/committee.png" alt=""  align="right">
                            </div>

                            <table id="committeetable" class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Members Name</th>
                                        <th>Position</th>
                                        <th>Email</th>
                                        <th>Phone</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr></tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- committee list panel definition ends -->
                        
                        <!-- Members list panel definition begins -->
                        <div id="membershiplistingcontent" style="display:none">
                            <div class="well  text-center" >
                                <div>
                                    <img class = "img-rounded" src="img/membershiplisting.png" style="display:inline-block"  alt="" align="left"> 
                                    <h1 style="display:inline-block">Membership Listing</h1>
                                    <img class = "img-rounded" style="display:inline-block" src="img/membershiplisting.png" alt=""  align="right">
                                </div>
                            </div>

                            <table id="memberstable" class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Members Name</th>
                                        <th>Handicap (Exact)</th>
                                        <th>Handicap (Playing)</th>
                                        <th>Email</th>
                                        <th>Phone</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr></tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- Members list panel definition ends -->
                        
                        <!-- Society events panel definition begins -->
                        <div id="societyeventscontent" style="display:none">
                            <div class="well  text-center" >
                                    <img class = "img-rounded" src="img/societyevents.png" style="display:inline-block;vertical-align: middle" alt="" align="left"> 
                                    <h1 style="display:inline-block">Society events</h1>
                                    <img class = "img-rounded" style="display:inline-block;vertical-align: middle" src="img/societyevents.png" alt=""  align="right" >
                            </div>

                            <table id = "societyeventstable" class=  "table table-hover">
                                <thead>
                                </thead>
                                <tbody>
                                    <tr></tr>
                                </tbody>
                            </table>
                            
                            <div class = "text-center well">
                                <div class="list-group" id="eventlist">
                                </div> 
                                <button type="button" class="btn btn-primary btn-arrow-left" style = "margin-bottom: 20px" id = "eventprevyearbtn">Prev</button>
                                <button type="button" class="btn btn-primary" style = "margin-left: 20px; margin-right: 20px; margin-bottom: 20px" id = "eventlistbtn">2017</button>
                                <button type="button" class="btn btn-primary btn-arrow-right" style = "margin-bottom: 20px" id = "eventnextyearbtn">Next</button>
                            </div>
                            
                            
                        </div>
                        <!-- Society events panel definition ends -->
                        
                        <!-- Competition results panel definition begins -->
                        <div id="competitionresultscontent" style="display:none">
                            <div class="well  text-center" >
                                <div>
                                    <img class = "img-rounded" src="img/competitionresultslisting.png" style="display:inline-block" alt="" align="left"> 
                                    <h1 style="display:inline-block">Competition results</h1>
                                    <img class = "img-rounded" style="display:inline-block" src="img/competitionresultslisting.png" alt="" align="right">
                                </div>
                            </div>

                            <table id = "competitionresultsinfotable" class=  "table table-hover">
                                <thead>
                                </thead>
                                <tbody>
                                    <tr></tr>
                                </tbody>
                            </table>
    
                            <table id = "competitionresultsscoretable" class=  "table table-hover">
                                <thead>
                                    <th>Member Name</th>
                                    <th>Handicap</th>
                                    <th>Net Score</th>
                                </thead>
                                <tbody>
                                    <tr></tr>
                                </tbody>
                            </table>
                            
                            <div class = "text-center well">
                                <div class="list-group" id="competitionlist">
                                </div> 
                                <button type="button" class="btn btn-primary btn-arrow-left" style = "margin-bottom: 20px" id = "competitionlistprevyearbtn">Prev</button>
                                <button type="button" class="btn btn-primary" style = "margin-left: 20px; margin-right: 20px; margin-bottom: 20px" id = "competitionlistbtn">2017</button>
                                <button type="button" class="btn btn-primary btn-arrow-right" style = "margin-bottom: 20px" id = "competitionlistnextyearbtn">Next</button>
                            </div>
                        </div>
                        <!-- Competition results panel definition ends -->
                        
                        <!-- Player of the Year panel definition begins -->
                        <div id="playeroftheyearcontent" style="display:none">
                            <div class="well  text-center" >
                                <img class = "img-rounded" src="img/playeroftheyear.png" style="display:inline-block"  alt="" align="left" > 
                                <h1 style="display:inline-block">Player of the Year</h1>
                                <img class = "img-rounded" style="display:inline-block" src="img/playeroftheyear.png" alt=""  align="right" >
                            </div>

                            <table id = "playeroftheyeartable" class=  "table table-hover">
                                <thead>
                                </thead>
                                <tbody>
                                    <tr></tr>
                                </tbody>
                            </table>                        
                        </div>
                        <!-- Player of the Year panel definition ends -->
                        
                    <!-- Logged user panel definitions begin -->
                        <!-- Account Settings panel definition begins -->
                        <div id = "accountsettings" style = "display:none">
                            <div class = "well  text-center" >  
                                <h1>Account Settings</h1>
                            </div>

                            <div class = "well" id = "changedetailspanel">
                                <label style = "margin-top:20px" for="accountusername">
                                    Login:
                                </label>
                                <input type="text" class="form-control" id="accountusername">

                                <label style = "margin-top:20px" for="accountname">
                                    Name:
                                </label>
                                <input type="text" class="form-control" id="accountname">

                                <label style = "margin-top:20px" for="accountemail">
                                    Email:
                                </label>
                                <input type="text" class="form-control" id="accountemail">

                                <label style = "margin-top:20px" for="accountphone">
                                    Phone:
                                </label>
                                <input type="text" class="form-control" id="accountphone">                                
                                <button id="updateaccountdetails" style = "margin-top:20px" type="button" class="btn btn-primary btn-block">
                                    Apply changes
                                </button>
                            </div>

                            <div class = "well" id = "changepasswordpanel">
                                <label style = "margin-top:20px" for="accountcurrentpassword">
                                    Current password:
                                </label>
                                <input type="password" class="form-control" id="accountcurrentpassword">

                                <label style = "margin-top:20px" for="accountnewpassword">
                                    New password:
                                </label>
                                <input type="password" class="form-control" id="accountnewpassword">

                                <label style = "margin-top:20px" for="accountrepeatnewpassword">
                                    Repeat new password:
                                </label>
                                <input type="password" class="form-control" id="accountrepeatnewpassword">

                                <button id="changeaccountpassword" style = "margin-top:20px" type="button" class="btn btn-primary btn-block">
                                    Change password
                                </button>
                            </div>            
                        </div>
                        <!-- Account Settings panel definition ends -->
                        
                        <!-- User Stats panel definition begins -->
                        <div id="userstats" style="display:none">
                            <div class="well  text-center" >  
                                <h1>User Stats</h1> 
                            </div>
                        </div>
                        <!-- User Stats panel definition ends -->
                    <!-- Logged user panel definitions end -->
                        
                    <!-- ADMIN  panels definitions begin -->
                        <!-- Add member panel definition begins -->
                        <div id="addmember" style="display:none">
                            <div class="well  text-center" >  
                                <h1>Add member</h1> 
                            </div>

                            <form class="form well" role="form" method="post" action="addmemberform" accept-charset="UTF-8" id="addmemberpanel">
                                <div class="form-group">
                                    <label for="addmemberusername">
                                        Username:
                                    </label>
                                    <input type="text" class="form-control" id="addmemberusername" placeholder="Username" required>
                                </div>

                                <div class="form-group">
                                    <label for="addmembername">
                                        Member name:
                                    </label>
                                    <input type="text" class="form-control" id="addmembername" placeholder="Albert Einstein" required>
                                </div>

                                <div class="form-group">
                                    <label for="addmemberhandicap">
                                        Handicap:
                                    </label>
                                    <input type="text" class="form-control" id="addmemberhandicap" placeholder="20" required>
                                </div>

                                <div class="form-group">
                                    <button id="addmemberbtn" type="button" class="btn btn-primary btn-block">
                                        Add member
                                    </button>
                                </div>
                            </form>
                        </div>
                        <!-- Add member panel definition ends -->
                        
                        <!-- Edit members panel definition begins -->
                        <div id="editmembers" style="display:none">
                            <div class="well  text-center" >  
                                <h1>Edit members</h1>     
                            </div>

                            <div class="list-group" id = "editmemberslist">
                            </div> 
                        </div>
                        <!-- Edit members panel definition ends -->
                        
                        <!-- Edit committee panel definition begins -->
                        <div id="editcommittee" style="display:none">
                            <div class="well  text-center" >  
                                <h1>Edit committee</h1>     
                            </div>

                            <div class="list-group" id = "editcommitteelist">
                            </div> 
                        </div>
                        <!-- Edit committee panel definition ends -->                        
                        
                        <!-- Edit Society Events definition begins -->
                        <div id="editsocietyevents" style="display:none">
                            <div class="well  text-center" >  
                                <h1>Edit Society Events</h1>     
                            </div>
                            <div class = "well" id = "editeventpanel">
                                
                                <button id="deleteaventbtn" type="button" style = "margin-bottom:20px" class="btn btn-danger btn-block">
                                    Delete Event
                                </button>
                                
                                <label style = "margin-top:20px" for="editeventname">
                                    Event name:
                                </label>
                                <input type="text" class="form-control" id="editeventname">

                                <label style = "margin-top:20px" for="editeventcourse">
                                    Course:
                                </label>
                                <input type="text" class="form-control" id="editeventcourse">

                                <label style = "margin-top:20px" for="editeventpostcode">
                                    Post Code of Course:
                                </label>
                                <input type="text" class="form-control" id="editeventpostcode">
                                
                                <label style = "margin-top:20px" for="editeventclub">
                                    Club or Course Website:
                                </label>
                                <input type="text" class="form-control" id="editeventclub">

                                <div class="form-group">
                                    <label style = "margin-top:20px" for="editeventdate">
                                        Date of Event:
                                    </label>
                                    <div class='input-group date' data-date="" data-date-format="dd MM yyyy" id='editeventdate'>
                                        <input type='text' class="form-control" readonly id="editneweventdate">
                                        <span class="input-group-addon">
                                            <span class="glyphicon glyphicon-calendar"></span>
                                        </span>
                                    </div>
                                </div>

                                <label style = "margin-top:20px" for="editeventprice">
                                    Price per Head:
                                </label>
                                <input type="text" class="form-control" id="editeventprice">    
                                
                                <label style = "margin-top:20px" for="editeventwhatincluded">
                                    What's included:
                                </label>
                                <input type="text" class="form-control" id="editeventwhatincluded">
                                
                                <label style = "margin-top:20px" for="editeventmaxparticipants">
                                    Max Number of Participants:
                                </label>
                                <input type="text" class="form-control" id="editeventmaxparticipants">

                                <label style = "margin-top:20px" for="editevenorganiser">
                                    Main Event Organiser:
                                </label>
                                <input type="text" class="form-control" id="editevenorganiser">                                
                                <div class="form-group">
                                    <label style = "margin-top:20px" for="editeventteatime">
                                        First tee time:
                                    </label>
                                    <div class='input-group date form-time' data-date="" data-date-format="hh:ii" id='editeventteatime'>
                                        <input type='text' class="form-control" readonly id="editneweventteatime">
                                        <span class="input-group-addon">
                                            <span class="glyphicon glyphicon-time"></span>
                                        </span>
                                    </div>
                                </div>      
                                
                                <div class="form-group">
                                    <label for="editeventnotes">Notes:</label>
                                    <textarea class="form-control" rows="5" id="editeventnotes"></textarea>
                                </div> 
                                
                                <button id="editeventbtn" type="button" style = "margin-top:20px" class="btn btn-primary btn-block">
                                    Apply changes
                                </button>
                            </div>
                            <div class = "text-center well">
                                <div class="list-group" id="editeventlist">
                                </div> 
                                <button type="button" class="btn btn-primary btn-arrow-left" style = "margin-bottom: 20px" id = "editeventprevyearbtn">Prev</button>
                                <button type="button" class="btn btn-primary" style = "margin-left: 20px; margin-right: 20px; margin-bottom: 20px" id = "editeventlistbtn">2017</button>
                                <button type="button" class="btn btn-primary btn-arrow-right" style = "margin-bottom: 20px" id = "editeventnextyearbtn">Next</button>
                            </div>
                        </div>
                        <!-- Edit Society Event panel definition ends -->
                        
                        <!-- Add society event panel definition begins -->
                        <div id="createsocietyevent" style="display:none">
                            <div class="well  text-center" >  
                                <h1>Publish a new event</h1> 
                            </div>

                            <div class = "well" id = "basicaddeventpanel">
                                <label style = "margin-top:20px" for="addeventname">
                                    Event name:
                                </label>
                                <input type="text" class="form-control" id="addeventname" value="">

                                <label style = "margin-top:20px" for="addeventcourse">
                                    Course:
                                </label>
                                <input type="text" class="form-control" id="addeventcourse"  value="">

                                <label style = "margin-top:20px" for="addeventpostcode">
                                    Post Code of Course:
                                </label>
                                <input type="text" class="form-control" id="addeventpostcode"  value="">
                                
                                <label style = "margin-top:20px" for="addeventclub">
                                    Club or Course Website:
                                </label>
                                <input type="text" class="form-control" id="addeventclub"  value="">

                                <div class="form-group">
                                    <label style = "margin-top:20px" for="addeventdate">
                                        Date of Event:
                                    </label>
                                    <div class='input-group date' data-date-format="dd MM yyyy" id='addeventdate'>
                                        <input type='text' class="form-control" readonly id="neweventdate">
                                        <span class="input-group-addon">
                                            <span class="glyphicon glyphicon-calendar"></span>
                                        </span>
                                    </div>
                                </div>

                                <label style = "margin-top:20px" for="addeventprice">
                                    Price per Head:
                                </label>
                                <input type="text" class="form-control" id="addeventprice">    
                                
                                <label style = "margin-top:20px" for="addeventwhatincluded">
                                    What's included:
                                </label>
                                <input type="text" class="form-control" id="addeventwhatincluded"  value="">
                                
                                <label style = "margin-top:20px" for="addeventmaxparticipants">
                                    Max Number of Participants:
                                </label>
                                <input type="text" class="form-control" id="addeventmaxparticipants"  value="">

                                <label style = "margin-top:20px" for="addevenorganiser">
                                    Main Event Organiser:
                                </label>
                                <input type="text" class="form-control" id="addevenorganiser"  value="">                                
                                <div class="form-group">
                                    <label style = "margin-top:20px" for="addeventteatime">
                                        First tee time:
                                    </label>
                                    <div class='input-group date form-time' data-date="" data-date-format="hh:ii" id='addeventteatime'>
                                        <input type='text' class="form-control" id="neweventteatime" readonly>
                                        <span class="input-group-addon">
                                            <span class="glyphicon glyphicon-time"></span>
                                        </span>
                                    </div>
                                </div>      
                                
                                
                                <div class="form-group">
                                    <label for="addeventnotes">Notes:</label>
                                    <textarea class="form-control" rows="5" id="addeventnotes"  value=""></textarea>
                                </div> 
                                
                                <button id="addeventbtn" type="button" style = "margin-top:20px" class="btn btn-primary btn-block">
                                    Publish new event
                                </button>
                            </div>
                        </div>
                        <!-- Add society event panel definition ends -->
                        <!-- Add competition result panel definition begins -->
                        <div id="addcompetition" style="display:none">
                            <div class="well  text-center" >  
                                <h1>Add Competition Result</h1> 
                            </div>

                            <div class = "well">
                                <button id="addcompetitionsubmitbtn" type="button" style = "margin-top:20px" class="btn btn-primary btn-block">
                                    Submit Competition Result
                                </button>
                            </div>
                            
                            <form class="form well" role="form" accept-charset="UTF-8" id="addcompetitionresultpanel">
                                <div class="form-group">
                                    <label for="addcompetitioneventname">
                                        Event name:
                                    </label>
                                    <input type="text" class="form-control" id="addcompetitioneventname" placeholder="" required>
                                </div>

                                <div class="form-group">
                                    <label for="addcompetitionname">
                                        Competition
                                    </label>
                                    <input type="text" class="form-control" id="addcompetitionname" placeholder="" required>
                                </div>

                                <div class="form-group">
                                    <label for="addcompetitionvenue">
                                        Venue:
                                    </label>
                                    <input type="text" class="form-control" id="addcompetitionvenue" placeholder="" required>
                                </div>

                                <div class="form-group">
                                <label style = "margin-top:20px" for="addcompetitiondate">
                                        Date of Competition:
                                    </label>
                                    <div class='input-group date' data-date-format="dd MM yyyy" id='addcompetitiondate'>
                                        <input type='text' class="form-control" readonly id="newcompetitiondate">
                                        <span class="input-group-addon">
                                            <span class="glyphicon glyphicon-calendar"></span>
                                        </span>
                                    </div>
                                </div>                                
                            </form>
                            
                            <table id="addcompetitionresulttable" class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Member Name</th>
                                        <th>Handicap</th>
                                        <th>Net Score</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                            
                            <div class = "well" id = "addcompetitionmemberresult">
                                
                                <label for="addcompetitionmembernamebtn">
                                        Member name:
                                </label>
                                <button id="addcompetitionmembernamebtn" type="button" style = "" class="btn btn-success btn-block">
                                    Choose Member
                                </button>
                                <div class="list-group" id="addcompetitionmemberlist" style = "display:none">
                                </div>
                                
                                <div class="form-group" style = "margin-top:20px">
                                    <label for="addcompetitionmemberhandicap">
                                        Member handicap:
                                    </label>
                                    <input type="text" class="form-control" id="addcompetitionmemberhandicap" placeholder="" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="addcompetitionmembernetscore">
                                        Member net score:
                                    </label>
                                    <input type="text" class="form-control" id="addcompetitionmembernetscore" placeholder="" required>
                                    
                                <button id="addcompetitionmemberresultbtn" type="button" style = "margin-top:20px" class="btn btn-primary btn-block">
                                    Add Member result
                                </button>
                                </div>
                            </div>
                        
                        </div>
                        <!-- Add competition result definition ends -->
                        <!-- Edit competition result panel definition begins -->
                        <div id="editcompetition" style="display:none">
                            <div class="well  text-center" >  
                                <h1>Edit Competition Results</h1> 
                            </div>

                            <div class = "well">
                                <button id="editcompetitiondeletebtn" type="button" style = "margin-top:20px" class="btn btn-danger btn-block">
                                    Delete Competition
                                </button>
                            </div>
                            
                            <form class="form well" role="form" accept-charset="UTF-8" id="editcompetitionresultpanel">
                                <div class="form-group">
                                    <label for="editcompetitioneventname">
                                        Event name:
                                    </label>
                                    <input type="text" class="form-control" id="editcompetitioneventname" placeholder="" required>
                                </div>

                                <div class="form-group">
                                    <label for="editcompetitionname">
                                        Competition
                                    </label>
                                    <input type="text" class="form-control" id="editcompetitionname" placeholder="" required>
                                </div>

                                <div class="form-group">
                                    <label for="editcompetitionvenue">
                                        Venue:
                                    </label>
                                    <input type="text" class="form-control" id="editcompetitionvenue" placeholder="" required>
                                </div>

                                <div class="form-group">
                                <label style = "margin-top:20px" for="editcompetitiondate">
                                        Date of Competition:
                                    </label>
                                    <div class='input-group date' data-date-format="dd MM yyyy" id='editcompetitiondate'>
                                        <input type='text' class="form-control" readonly id="editnewcompetitiondate">
                                        <span class="input-group-addon">
                                            <span class="glyphicon glyphicon-calendar"></span>
                                        </span>
                                    </div>
                                </div>    
                                
                                <button id="editcompetitionsubmitbtn" type="button" style = "margin-top:20px" class="btn btn-primary btn-block">
                                    Apply changes
                                </button>
                            </form>
                            
                           <!-- <table id="editcompetitionresulttable" class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Member Name</th>
                                        <th>Handicap</th>
                                        <th>Net Score</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>-->
                            
                            <div class="list-group" id = "editcompetitionresultlist">
                            </div> 
                            
                            <div class = "well" id = "editcompetitionmemberresult">
                                
                                <label for="editcompetitionmembernamebtn">
                                        Member name:
                                </label>
                                <button id="editaddcompetitionmembernamebtn" type="button" style = "" class="btn btn-success btn-block">
                                    Choose Member
                                </button>
                                <div class="list-group" id="editaddcompetitionmemberlist" style = "display:none">
                                </div>
                                
                                <div class="form-group" style = "margin-top:20px">
                                    <label for="editcompetitionmemberhandicap">
                                        Member handicap:
                                    </label>
                                    <input type="text" class="form-control" id="editcompetitionmemberhandicap" placeholder="" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="editcompetitionmembernetscore">
                                        Member net score:
                                    </label>
                                    <input type="text" class="form-control" id="editcompetitionmembernetscore" placeholder="" required>
                                    
                                <button id="editcompetitionmemberresultbtn" type="button" style = "margin-top:20px" class="btn btn-primary btn-block">
                                    Add Member result
                                </button>
                                </div>
                            </div>
                            
                            <div class = "text-center well">
                                <div class="list-group" id="editcompetitionlist">
                                </div> 
                                <button type="button" class="btn btn-primary btn-arrow-left" style = "margin-bottom: 20px" id = "editcompetitionlistprevyearbtn">Prev</button>
                                <button type="button" class="btn btn-primary" style = "margin-left: 20px; margin-right: 20px; margin-bottom: 20px" id = "editcompetitionlistbtn">2017</button>
                                <button type="button" class="btn btn-primary btn-arrow-right" style = "margin-bottom: 20px" id = "editcompetitionlistnextyearbtn">Next</button>
                            </div>
                        </div>
                        <!-- Edit competition result definition ends -->                        
                        
                    <!-- ADMIN  panels definitions ends -->
                    </div>
                </div>
            </div>

            <!-- About content-->
            <div class="container" id="about">
                <div class="row">
                </div>
            </div>
        
        </div>
        
        <footer>
            <!-- Footer - Contact content -->
            <div id="footer-placeholder">
            </div>
        </footer>
        
        <script>  // scripts for html menus, carrousel and date picking support 
            $(document).ready(function(){    
                
                 //General access links:
                
                $("#glofmenu").on("click", "#committee", function(event){;  // show committee 
                     hideAll();
                     $("#committeecontent").show();
                });
                
                $("#glofmenu").on("click", "#competitionresults", function(event){;  // show committee 
                     hideAll();
                     $("#competitionresultscontent").show();
                });

                $("#glofmenu").on("click", "#playeroftheyear", function(event){;  // show committee 
                     hideAll();
                     $("#playeroftheyearcontent").show();
                });                
                
                $("#glofmenu").on("click", "#membershiplisting", function(event){   // show members list
                    hideAll();
                    $("#membershiplistingcontent").show();
                    for(let i = 0, length = MEMBERS.length; i < length; i++){
                        console.log(MEMBERS[i]);
                    }   
                });  
                
                $("#glofmenu").on("click", "#societyeventslisting", function(event){;  // show society events 
                     hideAll();
                     $("#societyeventscontent").show();
                });
                
                //Logged user links (from top menu):
                
                $("#accountsettingsLink").on("click", function(event){ // show logged user account settings  
                    hideAll();
                    $("#accountusername").val(user.data.username);
                    $("#accountname").val(user.data.name);
                    $("#accountphone").val(user.data.phone);
                    $("#accountemail").val(user.data.email);
                    $("#accountsettings").show();
                });

                $("#userstatsLink").on("click", function(event){    // show logged user statistics
                    hideAll();
                    $("#userstats").show();
                });
                
                //Admin menu links:
                
                $("#addmemberLink").on("click", function(event){    // show add member panel 
                    hideAll();
                    $("#addmember").show();
                });

                $("#editmembersLink").on("click", function(event){  // show edits member panel
                    hideAll();
                    $("#editmembers").show();
                });
                
                $("#editcommitteeLink").on("click", function(event){  // show edits member panel
                    hideAll();
                    $("#editcommittee").show();
                });
                
                $("#editsocietyeventsLink").on("click", function(event){  // show edits member panel
                    hideAll();
                    $("#editsocietyevents").show();
                });
                
                $("#createsocietyeventLink").on("click" , function(event){  // show add event panel
                    hideAll();
                    $("#createsocietyevent").show();
                });    
                
                $("#addcompetitionresultsLink").on("click" , function(event){  // show add event panel
                    hideAll();
                    $("#addcompetition").show();
                });    
                $("#editcompetitionresultsLink").on("click" , function(event){  // show add event panel
                    hideAll();
                    $("#editcompetition").show();
                });   
                
                // carrousel and date/time picking
                
                $('#myCarousel').carousel({ // change carrousel slide each 10s
                    interval: 10000
                });

                $('#addcompetitiondate').datetimepicker({ // fancy date picking for add competition panel
                    weekStart: 1,
                    todayBtn:  1,
                    autoclose: 1,
                    todayHighlight: 1,
                    startView: 2,
                    minView: 2,
                    forceParse: 0
                });        
                
                $('#editcompetitiondate').datetimepicker({ // fancy date picking for edit socompetition panel
                    weekStart: 1,
                    todayBtn:  1,
                    autoclose: 1,
                    todayHighlight: 1,
                    startView: 2,
                    minView: 2,
                    forceParse: 0
                });
                
                
                $('#addeventdate').datetimepicker({ // fancy date picking for add society event panel
                    weekStart: 1,
                    todayBtn:  1,
                    autoclose: 1,
                    todayHighlight: 1,
                    startView: 2,
                    minView: 2,
                    forceParse: 0
                });
                
                $('#addeventteatime').datetimepicker({ // fancy tea-time picking for add society event panel
                    autoclose: 1,
                    pickerPosition: "top-right",
                    todayHighlight: 1,
                    startView: 1,
                    minView: 0,
                    maxView: 1,
                    forceParse: 0
                });
                
                $('#editeventdate').datetimepicker({ // fancy date picking for add society event panel
                    weekStart: 1,
                    todayBtn:  1,
                    autoclose: 1,
                    todayHighlight: 1,
                    startView: 2,
                    minView: 2,
                    forceParse: 0
                });
                
                $('#editeventteatime').datetimepicker({ // fancy tea-time picking for add society event panel
                    autoclose: 1,
                    pickerPosition: "top-right",
                    todayHighlight: 1,
                    startView: 1,
                    minView: 0,
                    maxView: 1,
                    forceParse: 0
                });         
                
                
                // usefull functions:
                
                $('a .notop').click(function(e){    // do not go to the top of page after clicking .notop link
                    e.preventDefault();            
                });                
                
                function hideAll(){     // hide all panels and clear secure data
                    $("#welcome").hide();
                    $("#committeecontent").hide();
                    $("#membershiplistingcontent").hide();
                    $("#accountsettings").hide();
                    $("#userstats").hide();
                    $("#addmember").hide();
                    $("#editmembers").hide();
                    $("#editcommittee").hide();
                    $("#createsocietyevent").hide();
                    $("#societyeventscontent").hide();
                    $("#competitionresultscontent").hide();
                    $("#playeroftheyearcontent").hide();
                    $("#editsocietyevents").hide();
                    $("#addcompetition").hide();
                    $("#editcompetition").hide();
                    clearSecureData();
                }
                
                function clearSecureData(){ // clear secure data like password in edit boxes
                    $("#accountrepeatnewpassword").val("");
                    $("#accountnewpassword").val("");
                    $("#accountcurrentpassword").val("");
                }
            });  
        </script>
        
        <script src="https://cdn.socket.io/socket.io-1.4.5.js">
        </script> 
        
        <script>    // scripts to handle server-client communication and update data
            let User = function(){
                let self = {};
                self.loggedin = false;
                return self;
            }
            
            var user = User();
            const MEMBERS = [];
            const SOCIETY_EVENTS = [];
            const COMPETITION_RESULT = [];
            let EDIT_COMPETITION_RESULT = [];
            const ALL_COMPETITION_RESULTS = [];
            let competitionYear = 0;
            let editCompetitionYear = 0;
            let societyEventsYear = 0;
            let societyEditEventsYear = 0;
            let activeEditEvent = 0;
            let activeEvent = 0;
            let activeCompetition = 0;
            let activeEditCompetition = 0;
            let competitionMemberSelected = false;
            let competitionEditMemberSelected = false;
            
            let committee = [];
            var socket = io(); 
            var committeDataLoaded = false;
            
            socket.emit('dataRequest', "membershiplisting");  
            socket.emit('dataRequest', "competitionresultslisting"); 
            socket.emit('dataRequest', "societyeventslisting"); 

            
            socket.on('singleMemberCompetitionResultAdded', function(data){
                ALL_COMPETITION_RESULTS.push(data);
                COMPETITION_RESULT.length = 0;
                updateCompetitionMemberList();
                
                if(activeCompetition == activeEditCompetition)
                    updateCompetitionTables(activeCompetition);                
                
                updatePlayerOfTheYearTable(playerYear);
                bootbox.alert({message: "New member competition result has been added.", backdrop: true})
            });
            
            socket.on('competitionResultAdded', function(data){
                
                for(let i =0, length = data["results"].length; i < length; i++){
                    ALL_COMPETITION_RESULTS.push(data["results"][i]);
                }
                
                COMPETITION_RESULT.length = 0;
                updateCompetitionMemberList();
                $('#addcompetitionresulttable').find('tbody').empty(); 
                
                $("#addcompetitionmemberhandicap").val("");
                $("#addcompetitionmembernetscore").val("");
                
                $("#addcompetitioneventname").val("");
                $("#addcompetitionname").val("");
                $("#addcompetitionvenue").val("");
                $("#newcompetitiondate").val("");
                
               
                
                updateCompetitionList(competitionYear);
                updateaditCompetitionList(editCompetitionYear);
                
                
                updatePlayerOfTheYearTable(playerYear);
                bootbox.alert({message: "New competition result has been added.", backdrop: true});
            });
            
            socket.on('eventAdded', function(data){
                
                console.log("MONTHAdded "+data["month"]);
                                        
                data["month"] = parseInt(data["month"], 10); 
                if(Number(data["month"]) < 10){
                    data["month"] = "0" + data["month"];
                }

                data["day"] = parseInt(data["day"], 10); 
                if(Number(data["day"]) < 10){
                    data["day"] = "0" + data["day"];
                }                
                console.log("MONTHAdded2 "+data["month"]);
                SOCIETY_EVENTS.push(data);
                sortEvents();
                updateaditSocietyEventList(societyEditEventsYear);
                updateSocietyEventList(societyEventsYear);
                bootbox.alert({message: "New Event has been added.", backdrop: true});
            });            
            
            socket.on('eventEdited', function(data){
                updateavent(data);
                sortEvents();
                updateaditSocietyEventList(societyEditEventsYear);
                updateSocietyEventList(societyEventsYear);
                if(activeEvent > -1){
                    if(data.id == SOCIETY_EVENTS[activeEvent].id){
                        updateSocietyEventTable(activeEvent);
                    }
                }
                bootbox.alert({message: "Event has been edited.", backdrop: true});
            });   
            
            socket.on('eventDeleted', function(data){
                console.log("Event deleted");
                
                if(activeEvent > -1){
                    if(SOCIETY_EVENTS[activeEvent].id == data.id){
                        updateSocietyEventTable(-1);
                        activeEvent = -1;
                    }
                }
                
                deleteavent(data);
                sortEvents();
                updateaditSocietyEventForm(-1);
                activeEditEvent = -1;
                
                updateaditSocietyEventList(societyEditEventsYear);
                updateSocietyEventList(societyEventsYear);
                
                console.log("Event deleted");
                bootbox.alert({message: "Event has been deleted.", backdrop: true});
            });   
            
            socket.on('competitionDeleted', function(data){
                console.log("Competition deleted");
                
                if(activeCompetition > -1){
                    if(ALL_COMPETITION_RESULTS[activeCompetition].id == data.id){
                        updateCompetitionTables(-1);
                        activeCompetition = -1;
                    }
                }
                
                deleteCompetition(data);

                updateaditCompetitionTables(-1);
                activeEditCompetition = -1;
                
                updateaditCompetitionList(editCompetitionYear);
                updateCompetitionList(competitionYear);
                updatePlayerOfTheYearTable(playerYear);
                console.log("Competition deleted");
                bootbox.alert({message: "Competition has been deleted.", backdrop: true});
            });   

            socket.on('competitionEdited', function(data){
                updateCompetition(data);

                updateaditCompetitionList();
                updateCompetitionList(competitionYear);
                if(activeCompetition > -1){
                    if(data.id == ALL_COMPETITION_RESULTS[activeCompetition].id){
                        updateCompetitionTables(activeCompetition);
                    }
                }
                updatePlayerOfTheYearTable(playerYear);
                bootbox.alert({message: "Competition has been edited.", backdrop: true});
            });         
            
            socket.on('memberCompetitionResultEdited', function(data){
                updateMemberCompetitionResult(data);
                if(activeEditCompetition == activeCompetition)
                    updateCompetitionTables(activeCompetition);
                updatePlayerOfTheYearTable(playerYear);
                bootbox.alert({message: "Member competition result has been edited.", backdrop: true});
            });              

            socket.on('memberCompetitionResultDeleted', function(data){
                deleteMemberCompetitionResult(data);
                updateaditCompetitionTables(activeEditCompetition);
                if(activeEditCompetition == activeCompetition)
                    updateCompetitionTables(activeCompetition);
                
                updateaditCompetitionList(editCompetitionYear);
                updateCompetitionList(competitionYear);
                
                updatePlayerOfTheYearTable(playerYear);
                bootbox.alert({message: "Member competition result has been deleted.", backdrop: true});
                
                updateaditCompetitionMemberList();
            });               
            
            socket.on('memberAdded', function(data){
                MEMBERS.push(data);
                updateMemberList();
                updatePlayerOfTheYearTable(playerYear);
                bootbox.alert({message: "Member has been added.", backdrop: true});
            });

            socket.on('committeeMemberEdited', function(data){
                    
                $('#committeetable').find('tbody').empty();                    
                    
                    getMember(data.username)["position"] = data.position;
                
                    committee.length = 0;
                    committee = getcommittee();
                    for(let i = 0, length = committee.length; i < length; i++){
                        $('#committeetable').find('tbody').append('<tr><td>'+committee[i]["name"]+'</td><td>'+committee[i]["position"]+'</td><td>'+committee[i]["email"]+'</td><td>'+committee[i]["phone"]+'</td></tr>');       
                    }
                    
                    $('#editcommitteelist').empty(); 
                    
                    for(let i = 0, length = committee.length; i < length; i++){       
                        
                        $('#editcommitteelist').append('<a href="javascript:void(0)" class="list-group-item notop list-group-item-info" id="'+i+'">'+committee[i]["name"]+'</a><ul class="list-group well" style="display:none" id="committee'+i+'" data-member="'+committee[i]["name"]+'"></ul><br>');
                        
                        $("#committee"+i).append('<button id="deletecommitteemember" type="button" style="margin-top:20px" class="btn btn-danger btn-block">Delete Member</button>');                        
                        
                        $("#committee"+i).append('<label for="editcommitteememberposition" style="margin-top:20px">Position:</label><input type="text" class="form-control list-group-item" id="editcommitteememberposition" placeholder="'+committee[i]["position"]+'" value="'+committee[i]["position"]+'" >');
                        
                        $("#committee"+i).append('<button id="editcommitteemember" type="button" style="margin-top:20px" class="btn btn-primary btn-block">Apply changes</button>');
                    }

                bootbox.alert({message: "Committee member has been edited.", backdrop: true});
                
            });       
            
            socket.on('committeeMemberDeleted', function(data){
                    
                $('#committeetable').find('tbody').empty();                    
                    
                    getMember(data.username)["committee"] = false;
                
                    committee.length = 0;
                    committee = getcommittee();
        
                    for(let i = 0, length = committee.length; i < length; i++){
                        $('#committeetable').find('tbody').append('<tr><td>'+committee[i]["name"]+'</td><td>'+committee[i]["position"]+'</td><td>'+committee[i]["email"]+'</td><td>'+committee[i]["phone"]+'</td></tr>');       
                    }
                    
                    $('#editcommitteelist').empty(); 
                    
                    for(let i = 0, length = committee.length; i < length; i++){       
                        
                        $('#editcommitteelist').append('<a href="javascript:void(0)" class="list-group-item notop list-group-item-info" id="'+i+'">'+committee[i]["name"]+'</a><ul class="list-group well" style="display:none" id="committee'+i+'" data-member="'+committee[i]["name"]+'"></ul><br>');
                        
                        $("#committee"+i).append('<button id="deletecommitteemember" type="button" style="margin-top:20px" class="btn btn-danger btn-block">Delete Member</button>');                        
                        
                        $("#committee"+i).append('<label for="editcommitteememberposition" style="margin-top:20px">Position:</label><input type="text" class="form-control list-group-item" id="editcommitteememberposition" placeholder="'+committee[i]["position"]+'" value="'+committee[i]["position"]+'" >');
                        
                        $("#committee"+i).append('<button id="editcommitteemember" type="button" style="margin-top:20px" class="btn btn-primary btn-block">Apply changes</button>');
                    } 
                     

                bootbox.alert({message: "Committee member has been deleted.", backdrop: true});
                
            });                
            
            socket.on('memberEdited', function(data){
                updateMember(data);
                updateMemberList();
                updatePlayerOfTheYearTable(playerYear);
                bootbox.alert({message: "Member has been edited.", backdrop: true});
                
                socket.emit('dataRequest', "membershiplisting");  
                socket.emit('dataRequest', "competitionresultslisting"); 
                
            });          
            
            socket.on('memberDeleted', function(data){
                deleteMember(data);
                updateMemberList();
                
                socket.emit('dataRequest', "competitionresultslisting"); 
                
                updatePlayerOfTheYearTable(playerYear);
                bootbox.alert({message: "Member has been deleted.", backdrop: true});
            });   
            
            socket.on('usernametaken', function(data){
                bootbox.alert({message: "Username already taken.", backdrop: true});
            });
            
            socket.on('membershiplistingData', function(data){ 
                $(document).ready(function() {
                    
                    //MEMBERS.length = 0;
                    MEMBERS.splice(0,MEMBERS.length);
                    
                    for(let i = 0, length = data.length; i < length; i++){
                        MEMBERS.push(data[i]);        
                    }
                    
                    sortMembersByName();
                    
                    $('#memberstable').find('tbody').empty();
                    
                    for(let i = 0, length = data.length; i < length; i++){       
                        updateMemberPanels(i);
                    }
                    
                    $('#committeetable').find('tbody').empty();                    
                    
                    committee.length = 0;
                    committee = getcommittee();
                    for(let i = 0, length = committee.length; i < length; i++){
                        $('#committeetable').find('tbody').append('<tr><td>'+committee[i]["name"]+'</td><td>'+committee[i]["position"]+'</td><td>'+committee[i]["email"]+'</td><td>'+committee[i]["phone"]+'</td></tr>');       
                    }
                    
                    $('#editcommitteelist').empty(); 
                    
                    for(let i = 0, length = committee.length; i < length; i++){       
                        
                        $('#editcommitteelist').append('<a href="javascript:void(0)" class="list-group-item notop list-group-item-info" id="'+i+'">'+committee[i]["name"]+'</a><ul class="list-group well" style="display:none" id="committee'+i+'" data-member="'+committee[i]["name"]+'"></ul><br>');
                        
                        $("#committee"+i).append('<button id="deletecommitteemember" type="button" style="margin-top:20px" class="btn btn-danger btn-block">Delete Member</button>');                        
                        
                        $("#committee"+i).append('<label for="editcommitteememberposition" style="margin-top:20px">Position:</label><input type="text" class="form-control list-group-item" id="editcommitteememberposition" placeholder="'+committee[i]["position"]+'" value="'+committee[i]["position"]+'" >');
                        
                        $("#committee"+i).append('<button id="editcommitteemember" type="button" style="margin-top:20px" class="btn btn-primary btn-block">Apply changes</button>');
                    }
                });                      
            }); 

            socket.on('competitionresultslistingData', function(data){ 
                $(document).ready(function() {
                    console.log('DANE');
                    ALL_COMPETITION_RESULTS.length = 0;
                    
                    for(let i = 0, length = data.length; i < length; i++){
                        data[i]["month"] = parseInt(data[i]["month"], 10); 
                       // data[i]["month"] = data[i]["month"];
                        ALL_COMPETITION_RESULTS.push(data[i]);        
                    }
                    
                    let index = getLastCompetitionIndex();
                    activeCompetition = index;
                    activeEditCompetition = index;
                    
                    competitionYear = ALL_COMPETITION_RESULTS[activeCompetition]["year"];
                    editCompetitionYear = ALL_COMPETITION_RESULTS[activeEditCompetition]["year"];
                    playerYear = competitionYear; 
                    
                    updateCompetitionTables(index);
                    updateCompetitionList(competitionYear);
                    
                    updateaditCompetitionTables(index);
                    updateaditCompetitionList(editCompetitionYear);
                    
                    updatePlayerOfTheYearTable(playerYear);
                    
                });
            });
            
            socket.on('societyeventslistingData', function(data){ 
                $(document).ready(function() {
                    for(let i = 0, length = data.length; i < length; i++){
                        data[i]["month"] = parseInt(data[i]["month"], 10); 
                       // data[i]["month"] = data[i]["month"];
                        SOCIETY_EVENTS.push(data[i]);        
                    }
                    sortEvents();
                    
                    let index = getLastEventIndex();
                    activeEditEvent = index;
                    activeEvent = index;
                    console.log('index '+index);
                    updateSocietyEventTable(index);
                    updateaditSocietyEventForm(index);
                    
                    societyEventsYear = SOCIETY_EVENTS[index]["year"];
                    societyEditEventsYear = SOCIETY_EVENTS[index]["year"];
                    
                    updateSocietyEventList(SOCIETY_EVENTS[index]["year"]);
                    updateaditSocietyEventList(SOCIETY_EVENTS[index]["year"]);
                    
                });                      
            }); 
            
            socket.on('passwordCorrect', function(data){
                if(($("#accountnewpassword").val()) === ($("#accountrepeatnewpassword").val())){
                    socket.emit('changePassword', {username: user.data.username, password: $('#accountnewpassword').val()});
                } else{
                    bootbox.alert({message: "New password doesn't match repeat password. Try again.", backdrop: true});
                }
            });
            
            socket.on('passwordIncorrect', function(data){
                bootbox.alert({message: "Current password incorrect!", backdrop: true});
            });
            
            socket.on('passwordChanged', function(data){
                bootbox.alert({message: "Password was changed!", backdrop: true});
            });
            
            socket.on('userDetailsChanged', function(data){     
                let member = getMember(user.data.username);
                
                member["username"] = data.username;
                member["name"] = data.name;
                member["email"] = data.email;
                member["phone"] = data.phone;
                
                user.data.name = member["name"];
                user.data.username = member["username"];
                user.data.email = member["email"];
                user.data.phone = member["phone"];
                
                updateMemberList();
                
                $("#accountusername").val(user.data.username);
                $("#accountname").val(user.data.name);
                $("#accountemail").val(user.data.email);
                $("#accountphone").val(user.data.phone);
                    
                showUserTab();
                
                bootbox.alert({message: "User details were changed!", backdrop: true});
                
                socket.emit('dataRequest', "membershiplisting");  
                socket.emit('dataRequest', "competitionresultslisting"); 
            });
            
            socket.on('signInResponse', function(data){
                if(data.success){
                    user.loggedin = true;
                    user["data"] = data;
                    
                    if(data.username !== "admin"){
                        let member = (getMember(data.username));
                        user.data.name = member["name"];
                        user.data.phone = member["phone"];
                        user.data.email = member["email"];
                        $("#changedetailspanel").show();
                    } else{
                        $("#changedetailspanel").hide();
                    }
                       
                   showUserTab();
                    
                   if(user["data"].admin === "true"){
                       $("#adminpanel").show();
                   }    
                }
            });
            
            $(document).ready(function() {
                $("#loginbtn").on("click", function(event){
                    socket.emit('signIn', {username: $('#loginUsername').val(), password: $('#loginPassword').val()} );
                });
                
                
                $("#addcompetitionmemberresultbtn").on("click", function(event){
                    if(checkMemberCompetitionResultFormValidation()){
                        $('#addcompetitionresulttable').find('tbody').append('<tr><td>'+$("#addcompetitionmembernamebtn").text() +'</td><td>'+ $("#addcompetitionmemberhandicap").val() +'</td><td>'+ $("#addcompetitionmembernetscore").val() + '</td></tr>');
                        
                        COMPETITION_RESULT.push({member: getMemberByName($("#addcompetitionmembernamebtn").text()), handicap: $("#addcompetitionmemberhandicap").val(), netscore: $("#addcompetitionmembernetscore").val()});
                        console.log(getMemberByName($("#addcompetitionmembernamebtn").text())["name"]);
                        
                        competitionMemberSelected = false;
                        $("#addcompetitionmembernamebtn").text("Choose Member");
                        $("#addcompetitionmemberhandicap").val("");
                        $("#addcompetitionmembernetscore").val("");
                        
                        updateCompetitionMemberList();
                    }
                    
                });
                
                $("#editcompetitionmemberresultbtn").on("click", function(event){
                    if(checkEditMemberCompetitionResultFormValidation()){
                        
                        socket.emit('addSingleMemberCompetitionResult',{handicap: $("#editcompetitionmemberhandicap").val(), netscore: $("#editcompetitionmembernetscore").val(), id: ALL_COMPETITION_RESULTS[activeEditCompetition].id, member: getMemberByName($("#editaddcompetitionmembernamebtn").text()), eventname: ALL_COMPETITION_RESULTS[activeEditCompetition]["eventname"],competitionname: ALL_COMPETITION_RESULTS[activeEditCompetition]["competitionname"],venue: ALL_COMPETITION_RESULTS[activeEditCompetition]["venue"], year: ALL_COMPETITION_RESULTS[activeEditCompetition]["year"], month: ALL_COMPETITION_RESULTS[activeEditCompetition]["month"], day: ALL_COMPETITION_RESULTS[activeEditCompetition]["day"]});
                        
                         
                        EDIT_COMPETITION_RESULT.push({member: getMemberByName($("#editaddcompetitionmembernamebtn").text()), handicap: $("#editcompetitionmemberhandicap").val(), netscore: $("#editcompetitionmembernetscore").val()});
                        
                        competitionEditMemberSelected = false;
                        $("#editaddcompetitionmembernamebtn").text("Choose Member");
                        $("#editcompetitionmemberhandicap").val("");
                        $("#editcompetitionmembernetscore").val("");
                        
                        //updateaditCompetitionTables(activeEditCompetition);
                        updateaditCompetitionMemberList();
                        let last = EDIT_COMPETITION_RESULT.length-1;
                        let i =last;
                        
                        $('#editcompetitionresultsscoretable').find('tbody').append('<tr><td>'+EDIT_COMPETITION_RESULT[last]["member"]["name"] +'</td><td>'+ EDIT_COMPETITION_RESULT[last]["handicap"] +'</td><td>'+ EDIT_COMPETITION_RESULT[last]["netscore"] + '</td></tr>');
                        
                        $('#editcompetitionresultlist').append('<a href="javascript:void(0)" class="list-group-item notop list-group-item-info" id="'+i+'">'+EDIT_COMPETITION_RESULT[last]["member"]["name"]+'</a><ul class="list-group well" style="display:none" id="competitionresult'+i+'" data-member="'+EDIT_COMPETITION_RESULT[last]["member"]["name"]+'"></ul><br>');
                        
                        //edit panel - adding members information
                        
                        $("#competitionresult"+i).append('<button id="deletemembercompetitionresult" type="button" style="margin-top:20px" class="btn btn-danger btn-block">Delete Member</button>');                        

                        $("#competitionresult"+i).append('<label for="editmembernetscorecompetitionresult" style="margin-top:20px">Member net score:</label><input type="text" class="form-control list-group-item" id="editmembernetscorecompetitionresult" placeholder="'+EDIT_COMPETITION_RESULT[last]["netscore"]+'" value="'+EDIT_COMPETITION_RESULT[last]["netscore"]+'">');

                        $("#competitionresult"+i).append('<label for="editmemberhandicapcompetitionresult" style="margin-top:20px">Member handicap:</label><input type="text" class="form-control list-group-item" id="editmemberhandicapcompetitionresult" placeholder="'+EDIT_COMPETITION_RESULT[last]["handicap"]+'"  value="'+EDIT_COMPETITION_RESULT[last]["handicap"]+'">');

                        $("#competitionresult"+i).append('<button id="editmembercompetitionresult" type="button" style="margin-top:20px" class="btn btn-primary btn-block">Apply changes</button>');                        
                        
                        //console.log(getMemberByName($("#addcompetitionmembernamebtn").text())["name"]);
                        
                     /*   $('#editcompetitionresulttable').find('tbody').append('<tr><td>'+$("#addcompetitionmembernamebtn").text() +'</td><td>'+ $("#addcompetitionmemberhandicap").val() +'</td><td>'+ $("#addcompetitionmembernetscore").val() + '</td></tr>');*/
                        /*
                        COMPETITION_RESULT.push({member: getMemberByName($("#addcompetitionmembernamebtn").text()), handicap: $("#addcompetitionmemberhandicap").val(), netscore: $("#addcompetitionmembernetscore").val()});
                        console.log(getMemberByName($("#addcompetitionmembernamebtn").text())["name"]);
                        
                        competitionMemberSelected = false;
                        $("#addcompetitionmembernamebtn").text("Choose Member");
                        $("#addcompetitionmemberhandicap").val("");
                        $("#addcompetitionmembernetscore").val("");
                        
                        updateCompetitionMemberList();*/
                    }
                    
                });
                
                $("#addcompetitionsubmitbtn").on("click", function(event){
                    let date = $("#addcompetitiondate").datetimepicker('getDate');
                    
                   if(checkCompetitionFormValidation()){
                       
                        let day = parseInt(date.getDate(), 10);
                        let month = Number(Number(date.getMonth())+1);
                        
                        if(Number(day) < 10){
                            day = "0" + day;
                        }
                        
                        if(Number(month) < 10){
                            month = "0" + month;
                        }
                       
                       socket.emit('addCompetitionResult', {results: COMPETITION_RESULT, eventname: $("#addcompetitioneventname").val(), competitionname: $("#addcompetitionname").val(), venue: $("#addcompetitionvenue").val(), month: month, year: date.getFullYear(), day: day });
                   } 
                });
                
                $("#addmemberbtn").on("click", function(event){
                    if(checkMemberFormValidation()){
                        socket.emit('addMember', {username:$("#addmemberusername").val(), password: $("#addmemberusername").val(), name: $("#addmembername").val(), 
                        handicapExact:$("#addmemberhandicap").val(), email:"", admin:"false", handicapPlaying:$("#addmemberhandicap").val(), phone:"", committee: "false"});
                    }
                });
                
                $("#addeventbtn").on("click", function(event){
                    let date = $("#addeventdate").datetimepicker('getDate');
                    console.log('YEAR ' + date.getFullYear() + 'DAY '+date.getDate());
                    
                    if(checkAddSocietyEventFormValidation()){
                            let day = parseInt(date.getDate(), 10);
                            let month = Number(Number(date.getMonth())+1);
                        
                            if(Number(day) < 10){
                                day = "0" + day;
                            }
                        
                            if(Number(month) < 10){
                                month = "0" + month;
                            }
                            console.log("MONTHAdd "+month);
                            socket.emit('addSocietyEvent',{name: $("#addeventname").val(), course: $("#addeventcourse").val(), postcode: $("#addeventpostcode").val(), website: $("#addeventclub").val(), price: $("#addeventprice").val(), included: $("#addeventwhatincluded").val(), maxplayers: $("#addeventmaxparticipants").val(), organiser: $("#addevenorganiser").val(), firstteatime: $("#neweventteatime").val(), notes: $("#addeventnotes").val(), month: month, year: date.getFullYear(), day: day}); 
                        }
                });
                
                
                $("#editmemberslist").on("click", "a", function(event){
                    let id = $(this).attr('id');
                    let propertiesId = "#member"+id;
                    
                    $(propertiesId).slideToggle();
                });
    
                $("#editcommitteelist").on("click", "a", function(event){
                    let id = $(this).attr('id');
                    let propertiesId = "#committee"+id;
                    
                    $(propertiesId).slideToggle();
                });
                
                $("#eventlist").on("click", "a", function(event){
                    let id = $(this).attr('id');
                    
                    updateSocietyEventTable(id);
                    activeEvent = id;
                });
                
                $("#editeventlist").on("click", "a", function(event){
                    let id = $(this).attr('id');
                    
                    updateaditSocietyEventForm(id);
                    activeEditEvent = id;
                });

                $("#editcompetitionresultlist").on("click", "a", function(event){
                    let id = $(this).attr('id');
                    let propertiesId = "#competitionresult"+id;
                    
                    $(propertiesId).slideToggle();
                });                
                
                $("#competitionlist").on("click", "a", function(event){
                    let id = $(this).attr('id');
                    
                    updateCompetitionTables(id);
                    activeCompetition = id;
                });
                
                $("#editcompetitionlist").on("click", "a", function(event){
                    let id = $(this).attr('id');
                    
                    updateaditCompetitionTables(id);
                    activeEditCompetition = id;
                });
                
                $("#addcompetitionmemberlist").on("click", "a", function(event){
                    let name = $(this).text();
                    $("#addcompetitionmembernamebtn").text(name);
                    $("#addcompetitionmemberhandicap").val(getMemberHandicap(name));
                    competitionMemberSelected = true;
                    $("#addcompetitionmemberlist").slideToggle();
                });
                
                $("#editaddcompetitionmemberlist").on("click", "a", function(event){
                    let name = $(this).text();
                    $("#editaddcompetitionmembernamebtn").text(name);
                    $("#editcompetitionmemberhandicap").val(getMemberHandicap(name));
                    competitionEditMemberSelected = true;
                    $("#editaddcompetitionmemberlist").slideToggle();
                });
                                
                $("#addcompetitionmembernamebtn").on("click", function(event){
                    $("#addcompetitionmemberlist").slideToggle();
                }); 
                
                $("#editaddcompetitionmembernamebtn").on("click", function(event){
                    $("#editaddcompetitionmemberlist").slideToggle();
                }); 
                
                $("#competitionlistnextyearbtn").on("click", function(event){
                    if(competitionYear < ALL_COMPETITION_RESULTS[getLastCompetitionIndex()]["year"]){
                        competitionYear++;
                        updateCompetitionList(competitionYear);
                    }
                });  

                $("#competitionlistprevyearbtn").on("click", function(event){
                    if(competitionYear > ALL_COMPETITION_RESULTS[getOldestCompetitionIndex()]["year"]){
                        competitionYear--;
                        updateCompetitionList(competitionYear);
                    }
                });

                $("#editcompetitionlistnextyearbtn").on("click", function(event){
                    if(editCompetitionYear < ALL_COMPETITION_RESULTS[getLastCompetitionIndex()]["year"]){
                        editCompetitionYear++;
                        updateaditCompetitionList(editCompetitionYear);
                    }
                });    

                $("#editcompetitionlistprevyearbtn").on("click", function(event){
                    if(editCompetitionYear > ALL_COMPETITION_RESULTS[getOldestCompetitionIndex()]["year"]){
                        editCompetitionYear--;
                        updateaditCompetitionList(editCompetitionYear);
                    }
                });
                
                $("#eventnextyearbtn").on("click", function(event){
                    console.log("Year "+societyEventsYear+"");
                    if(societyEventsYear < SOCIETY_EVENTS[getLastEventIndex()]["year"]){
                        societyEventsYear++;
                        updateSocietyEventList(societyEventsYear);
                    }
                });

                $("#eventprevyearbtn").on("click", function(event){
                    console.log("Year p"+getOldestEventIndex());
                    if(societyEventsYear > SOCIETY_EVENTS[getOldestEventIndex()]["year"]){
                        societyEventsYear--;
                        updateSocietyEventList(societyEventsYear);
                    }
                });
                
                $("#editeventnextyearbtn").on("click", function(event){
                    console.log("Year "+societyEditEventsYear+"");
                    if(societyEditEventsYear < SOCIETY_EVENTS[getLastEventIndex()]["year"]){
                        societyEditEventsYear++;
                        updateaditSocietyEventList(societyEditEventsYear);
                    }
                });

                $("#editeventprevyearbtn").on("click", function(event){
                    console.log("Year p"+getOldestEventIndex());
                    if(societyEditEventsYear > SOCIETY_EVENTS[getOldestEventIndex()]["year"]){
                        societyEditEventsYear--;
                        updateaditSocietyEventList(societyEditEventsYear);
                    }
                });
                
                $("#changepasswordpanel").on("click","button",function(event){
                    
                    socket.emit('checkCurrentPassword', {username: user.data.username, password: $("#accountcurrentpassword").val()});
                });
                
                $("#changedetailspanel").on("click","button",function(event){
                    if(checkUserDetailsFormValidation()){
                        socket.emit('changeUserDetails',{username: $("#accountusername").val(), oldusername: user.data.username, name: $("#accountname").val(), oldname: user.data.name, phone: $("#accountphone").val(), email: $("#accountemail").val()});   
                    }                    
                });
                
                 $("#editeventpanel").on("click", "button" ,function(event){
                     
                    if(($(this).attr('id')) == "editeventbtn" && activeEditEvent >= 0){
                        if(checkEditSocietyEventFormValidation()){
                            let date = $("#editeventdate").datetimepicker('getDate');
                            
                            let day = parseInt(date.getDate(), 10);
                            let month = Number(Number(date.getMonth())+1);
                        
                            if(Number(day) < 10){
                                day = "0" + day;
                            }
                        
                            if(Number(month) < 10){
                                month = "0" + month;
                            }
                            
                            socket.emit('editSocietyEvent',{name: $("#editeventname").val(), course: $("#editeventcourse").val(), postcode: $("#editeventpostcode").val(), website: $("#editeventclub").val(), price: $("#editeventprice").val(), included: $("#editeventwhatincluded").val(), maxplayers: $("#editeventmaxparticipants").val(), organiser: $("#editevenorganiser").val(), firstteatime: $("#editneweventteatime").val(), notes: $("#editeventnotes").val(), month: month, year: date.getFullYear(), day: day, id: SOCIETY_EVENTS[activeEditEvent]["id"]}); 
                        }
                    } else{
                        if(activeEditEvent >= 0){
                            bootbox.confirm("Are you sure to delete event '"+$("#editeventname").val()+"' ?" , function(result){
                                if(result){
                                    socket.emit('deleteavent',{id: SOCIETY_EVENTS[activeEditEvent]["id"]});  
                                }
                            }); 
                        }
                    }
                     
                 });
                
                $("#editcompetition").on("click", "button" ,function(event){
                     
                    if(($(this).attr('id')) == "editcompetitionsubmitbtn" && activeEditCompetition >= 0){
                        if(checkEditCompetitionFormValidation()){
                            let date = $("#editcompetitiondate").datetimepicker('getDate');

                            let day = parseInt(date.getDate(), 10);
                            let month = Number(Number(date.getMonth())+1);
                        
                            if(Number(day) < 10){
                                day = "0" + day;
                            }
                        
                            if(Number(month) < 10){
                                month = "0" + month;
                            }
                            socket.emit('editCompetition',{eventname: $("#editcompetitioneventname").val(), competitionname: $("#editcompetitionname").val(), venue: $("#editcompetitionvenue").val(), month: month, year: date.getFullYear(), day: day, id: ALL_COMPETITION_RESULTS[activeEditCompetition]["id"]}); 
                        }
                    } else if(($(this).attr('id')) == "editcompetitiondeletebtn"){
                        if(activeEditCompetition >= 0){
                            bootbox.confirm("Are you sure to delete competition '"+$("#editcompetitionvenue").val()+"' ?" , function(result){
                                if(result){
                                    socket.emit('deleteCompetition',{id: ALL_COMPETITION_RESULTS[activeEditCompetition]["id"]});  
                                }
                            }); 
                        }
                    }
                     
                 });         
                
                $("#editcompetitionresultlist").on("click", "button", function(event){
                    let netscore = "";
                    let handicap = "";
                     
                    $(this).parent().find('input').each(function(){
                        switch($(this).attr('id')){
                            case "editmembernetscorecompetitionresult": 
                                netscore = $(this).val();
                            break;
                            case "editmemberhandicapcompetitionresult":
                                handicap = $(this).val();
                            break;
                        }    
                    });
                     
                    let member = getMemberByName($(this).parent().data("member"));
                    
                    if(($(this).attr('id')) == "editmembercompetitionresult"){
                        if(checkEditSingleMemberCompetitionResultFormValidation($(this))){
                            socket.emit('editMemberCompetitionResult',{netscore: netscore, handicap: handicap, id: ALL_COMPETITION_RESULTS[activeEditCompetition].id, member: getMemberByName($(this).parent().data("member"))});
                        }
                    } else{
                        if(EDIT_COMPETITION_RESULT.length > 1){    
                            bootbox.confirm("Are you sure to delete "+$(this).parent().data("member")+" competition result?" , function(result){
                                if(result){
                                    console.log(member["name"]);
                                    socket.emit('deleteMemberCompetitionResult',{id: ALL_COMPETITION_RESULTS[activeEditCompetition].id, member: member});  
                                }
                            }); 
                        } else{
                            if(activeEditCompetition >= 0){
                            bootbox.confirm("At least one member result need to be recorded in competition. If you delete this member resulte whole competition will be deleted. Are you sure to delete competition '"+$("#editcompetitionvenue").val()+"' ?" , function(result){
                                if(result){
                                    socket.emit('deleteCompetition',{id: ALL_COMPETITION_RESULTS[activeEditCompetition]["id"]});  
                                }
                            }); 
                        }
                        }
                    }
                });
                
                $("#editmemberslist").on("click", "button", function(event){
                    let username = "";
                    let name = "";
                    let handicap = "";
                     
                    $(this).parent().find('input').each(function(){
                        switch($(this).attr('id')){
                            case "editmemberusername": 
                                username = $(this).val();
                            break;
                            case "editmembername": 
                                name = $(this).val();
                            break;
                            case "editmemberhandicap":
                                handicap = $(this).val();
                            break;
                        }    
                    });
                     
                    if(($(this).attr('id')) == "editmember"){
                        if(checkEditFormValidation($(this))){
                            let oldname = "";
                            
                            for(let i = 0, length = MEMBERS.length; i < length; i++){
                                if(MEMBERS[i]["username"] === username){
                                    oldname = MEMBERS[i]["name"];
                                    break;
                                }
                            }
                            
                            socket.emit('editMember',{username: username, name: name, oldname: oldname, member: getMemberByName(oldname), handicapExact: handicap});
                        }
                    } else{
                        bootbox.confirm("Are you sure to delete "+username+" ?" , function(result){
                            if(result){
                                socket.emit('deleteMember',{username: username, name: name, handicapExact: handicap});  
                            }
                        }); 
                    }
                });
                
                $("#editcommitteelist").on("click", "button", function(event){
                    let position = "";
                     
                    $(this).parent().find('input').each(function(){
                        switch($(this).attr('id')){
                            case "editcommitteememberposition": 
                                position = $(this).val();
                            break;
                        }    
                    });
                     
                    let member = getMemberByName($(this).parent().data("member"));
                    
                    if(($(this).attr('id')) == "editcommitteemember"){
                        if(checkCommitteeEditFormValidation($(this))){

                            socket.emit('editCommitteeMember',{username: member.username, position: position});
                        }
                    } else{
                        bootbox.confirm("Are you sure to delete "+member.name+" from committee?" , function(result){
                            if(result){
                                socket.emit('deleteCommitteeMember',{username: member.username});  
                            }
                        }); 
                    }
                });                
            
                $("#logoutLink").on("click" , function(event){
                    user.loggedin = false;
                    
                    $("#login-menu").show();
                    $("#loggedin").hide();
                    $("#adminpanel").hide();
                    $("#accountsettings").hide();
                    $("#userstats").hide();
                    $("#addmember").hide();
                    $("#editmembers").hide();
                    $("#createsocietyevent").hide();
                    $("#addcompetition").hide();
                    $("#editcompetition").hide();
                    $("#editcommittee").hide();
                });
            });
            
            function showUserTab(){
                $("#login-menu").hide();
                $("#loggedin").show();
                $("#userMenuTitle").text(user["data"].username);
            }
            
            function updateavent(event){   
                for(let i = 0, length = SOCIETY_EVENTS.length; i < length; i++){
                    if(SOCIETY_EVENTS[i]["id"] === event["id"]){
                        SOCIETY_EVENTS[i]["name"] = event.name;
                        SOCIETY_EVENTS[i]["course"] = event.course;
                        SOCIETY_EVENTS[i]["postcode"] = event.postcode;
                        SOCIETY_EVENTS[i]["website"] = event.website;
                        SOCIETY_EVENTS[i]["maxplayers"] = event.maxplayers;
                        SOCIETY_EVENTS[i]["included"] = event.included;
                        SOCIETY_EVENTS[i]["price"] = event.price;
                        SOCIETY_EVENTS[i]["year"] = event.year;
                        SOCIETY_EVENTS[i]["month"] = event.month;
                        SOCIETY_EVENTS[i]["day"] = event.day;
                        SOCIETY_EVENTS[i]["firstteatime"] = event.firstteatime;
                        SOCIETY_EVENTS[i]["organiser"] = event.organiser;
                        SOCIETY_EVENTS[i]["notes"] = event.notes;
                        break;
                    }
                }
            }        

            function deleteavent(event){    
                for(let i = 0, length = SOCIETY_EVENTS.length; i < length; i++){
                    if(SOCIETY_EVENTS[i]["id"] === event.id){    
                        SOCIETY_EVENTS.splice(i, 1);
                        break;
                    }
                }  
            }      
            
            function updateCompetition(competition){   
                for(let i = 0, length = ALL_COMPETITION_RESULTS.length; i < length; i++){
                    if(ALL_COMPETITION_RESULTS[i]["id"] === competition["id"]){
                        ALL_COMPETITION_RESULTS[i]["eventname"] = competition.eventname;
                        ALL_COMPETITION_RESULTS[i]["competitionname"] = competition.competitionname;
                        ALL_COMPETITION_RESULTS[i]["venue"] = competition.venue;
                        ALL_COMPETITION_RESULTS[i]["year"] = competition.year;
                        ALL_COMPETITION_RESULTS[i]["month"] = competition.month;
                        ALL_COMPETITION_RESULTS[i]["day"] = competition.day;
                    }
                }
            }              
            
            function deleteCompetition(competition){    
                
                let start = -1;
                let howMany = 0;
                
                for(let i = 0, length = ALL_COMPETITION_RESULTS.length; i < length; i++){
                    if(ALL_COMPETITION_RESULTS[i]["id"] === competition.id){ 
                        if(start == -1)
                            start = i;

                        howMany++;
                    }
                }
                
                ALL_COMPETITION_RESULTS.splice(start, howMany);
            }
            
            
            function updateMember(member){   
                for(let i = 0, length = MEMBERS.length; i < length; i++){
                    if(MEMBERS[i]["username"] === member.username){
                        MEMBERS[i]["name"] = member.name;
                        MEMBERS[i]["handicapExact"] = member.handicapExact;
                        break;
                    }
                }
            }
            
            function updateMemberCompetitionResult(data){
                console.log(data["member"]["name"]);
                for(let i = 0, length = ALL_COMPETITION_RESULTS.length; i < length; i++){
                    if(ALL_COMPETITION_RESULTS[i].id === data.id && ALL_COMPETITION_RESULTS[i]["member"]["name"] === data["member"]["name"]){
                        ALL_COMPETITION_RESULTS[i]["handicap"] = data.handicap;
                        ALL_COMPETITION_RESULTS[i]["netscore"] = data.netscore;
                        break;
                    }
                }
            }
    
            function deleteMemberCompetitionResult(data){    
                console.log(data["member"]["name"]);
                for(let i = 0, length = ALL_COMPETITION_RESULTS.length; i < length; i++){
                    if(ALL_COMPETITION_RESULTS[i].id === data.id && ALL_COMPETITION_RESULTS[i]["member"]["name"] === data["member"]["name"]){    
                        
                        let id = ALL_COMPETITION_RESULTS[i].id;
                        ALL_COMPETITION_RESULTS.splice(i, 1);
                        
                        if(i == activeEditCompetition){

                             for(let j = 0, length = ALL_COMPETITION_RESULTS.length; j < length; j++){
                                 if(id ==  ALL_COMPETITION_RESULTS[j].id){
                                     activeEditCompetition = j;
                                     break;
                                 } 
                             }
                        } 
                        
                        if(i == activeCompetition){
                            activeCompetition = -1;
                            updateCompetitionTables(activeCompetition);
                        }
                        
                        
                        break;
                    }
                }  
            }  
            
            function getMember(username){
                for(let i = 0, length = MEMBERS.length; i < length; i++){
                    if(MEMBERS[i]["username"] === username){
                        return MEMBERS[i];
                        break;
                    }
                }
            }
            
            function getMemberByName(name){
                for(let i = 0, length = MEMBERS.length; i < length; i++){
                    if(MEMBERS[i]["name"] === name){
                        return MEMBERS[i];
                        break;
                    }
                }
            }            
            
            function deleteMember(member){    
                for(let i = 0, length = MEMBERS.length; i < length; i++){
                    if(MEMBERS[i]["username"] === member.username){    
                        MEMBERS.splice(i, 1);
                        break;
                    }
                }  
            }            
            
            function updateMemberList(){
                $('#memberstable').find('tbody').empty();
                $('#editmemberslist').empty(); 
                $('#addcompetitionmemberlist').empty();    
                
                sortMembersByName();
                
                for(let i =0, length = MEMBERS.length; i < length; i++){     
                    updateMemberPanels(i);
                }
            }
            
            // Function to check letters and numbers  
            function alphanumeric(inputtxt, plusSpace){  
                let letterNumber;
                    
                if(plusSpace === true){
                    letterNumber = /^[0-9a-zA-Z]+$/;
                    letterNumber = /^[\w\-\s]+$/;
                } else{
                    letterNumber = /^[\w\-\s]+$/;
                    letterNumber = /^[0-9a-zA-Z]+$/;
                }
                
                if(inputtxt.match(letterNumber)){  
                    return true;  
                } else {    
                    return false;   
                }  
            }
            
            function validateamail(email) {
                let re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                return re.test(email);
            }

            function checkCommitteeEditFormValidation(btn){
                let position = "";
                
                btn.parent().find('input').each(function(){
                    switch($(this).attr('id')){
                        case "editcommitteememberposition": 
                            position = $(this).val();
                            break;
                        }        
                }); 
                
                if(alphanumeric(position, true) && position.length > 0){
                        return true;
                } else{
                    bootbox.alert({message:"Position data incorrect. Only letters, numbers and space allowed.", backdrop: true});
                    return false;
                }
            }            
            
            function checkEditFormValidation(btn){
                let name = "";
                let handicap = "";    
                
                btn.parent().find('input').each(function(){
                    switch($(this).attr('id')){
                        case "editmembername": 
                            name = $(this).val();
                            break;
                        case "editmemberhandicap" :
                            handicap = $(this).val();
                            break;
                        }        
                }); 
                
                if(alphanumeric(name, true) && name.length > 0){
                    if($.isNumeric(handicap)){
                        return true;
                    } else{
                        bootbox.alert({message: "Handicap data incorrect. Only numbers allowed.", backdrop: true});
                        return false;
                    }
                } else{
                    bootbox.alert({message:"Name data incorrect. Only letters, numbers and space allowed.", backdrop: true});
                    return false;
                }
            }
            
            function checkUserDetailsFormValidation(){
                if(alphanumeric($("#accountusername").val(), false) && $("#accountusername").val().length > 0 ){
                    if(alphanumeric($("#accountname").val(), true) && $("#accountname").val().length > 0 ){
                        if($.isNumeric($("#accountphone").val()) || $("#accountphone").val() == ""){
                            if(validateamail(($("#accountemail").val())) || $("#accountemail").val() == ""){
                                return true;
                            } else{
                                bootbox.alert({message: "Email data incorrect. Only email format allowed or leave it blank.", backdrop: true});
                                return false;
                            }
                        } else{
                            bootbox.alert({message: "Phone data incorrect. Only numbers allowed or leave it blank.", backdrop: true});
                            return false;
                        }
                     } else{
                        bootbox.alert({message:"Name data incorrect. Only letters, numbers and space allowed.", backdrop: true});
                        return false;
                     }
                } else{
                    bootbox.alert({message: "Username data incorrect. Only letters and numbers allowed.", backdrop: true});
                    return false;   
                }
            }
            
            function checkMemberFormValidation(){
                if(alphanumeric($("#addmemberusername").val(), false) && $("#addmemberusername").val().length > 0 ){
                    if(alphanumeric($("#addmembername").val(), true) && $("#addmembername").val().length > 0 ){
                        if($.isNumeric($("#addmemberhandicap").val())){
                            return true;
                        } else{
                            bootbox.alert({message: "Handicap data incorrect. Only numbers allowed.", backdrop: true});
                            return false;
                        }
                    } else{
                        bootbox.alert({message:"Name data incorrect. Only letters, numbers and space allowed.", backdrop: true});
                        return false;
                        }
                } else {
                    bootbox.alert({message: "Username data incorrect. Only letters and numbers allowed.", backdrop: true});
                    return false;
                }
            }

            function checkEditSingleMemberCompetitionResultFormValidation(btn){
                let netscore = "";
                let handicap = "";    
                
                btn.parent().find('input').each(function(){
                    switch($(this).attr('id')){
                        case "editmembernetscorecompetitionresult": 
                            netscore = $(this).val();
                            break;
                        case "editmemberhandicapcompetitionresult" :
                            handicap = $(this).val();
                            break;
                        }        
                }); 
                
                if($.isNumeric(netscore)){
                    if($.isNumeric(handicap)){
                        return true;
                    } else{
                        bootbox.alert({message: "Handicap data incorrect. Only numbers allowed.", backdrop: true});
                        return false;
                    }
                } else{
                    bootbox.alert({message:"Net score data incorrect. Only numbers allowed.", backdrop: true});
                    return false;
                }
            }           
            
            function checkCompetitionFormValidation(){
                if(alphanumeric($("#addcompetitioneventname").val(), true) && $("#addcompetitioneventname").val().length > 0 ){
                    if(alphanumeric($("#addcompetitionname").val(), true) && $("#addcompetitionname").val().length > 0 ){
                        if(alphanumeric($("#addcompetitionvenue").val(), true) && $("#addcompetitionvenue").val().length > 0 ){
                            if($("#newcompetitiondate").val().length > 0){
                                return true;
                            } else{
                                bootbox.alert({message:"You need to choose competition date.", backdrop: true});
                                return false;
                            }
                        } else{
                            bootbox.alert({message: "Competition venue data incorrect. Only letters, numbers and space allowed.", backdrop: true});
                            return false;
                        }
                    } else{
                        bootbox.alert({message:"Competition name data incorrect. Only letters, numbers and space allowed.", backdrop: true});
                        return false;
                        }
                } else {
                    bootbox.alert({message: "Event name data incorrect. Only letters, numbers and space allowed.", backdrop: true});
                    return false;
                }
            }
            
            function checkEditCompetitionFormValidation(){
                if(alphanumeric($("#editcompetitioneventname").val(), true) && $("#editcompetitioneventname").val().length > 0 ){
                    if(alphanumeric($("#editcompetitionname").val(), true) && $("#editcompetitionname").val().length > 0 ){
                        if(alphanumeric($("#editcompetitionvenue").val(), true) && $("#editcompetitionvenue").val().length > 0 ){
                            if($("#editnewcompetitiondate").val().length > 0){
                                return true;
                            } else{
                                bootbox.alert({message:"You need to choose competition date.", backdrop: true});
                                return false;
                            }
                        } else{
                            bootbox.alert({message: "Competition venue data incorrect. Only letters, numbers and space allowed.", backdrop: true});
                            return false;
                        }
                    } else{
                        bootbox.alert({message:"Competition name data incorrect. Only letters, numbers and space allowed.", backdrop: true});
                        return false;
                        }
                } else {
                    bootbox.alert({message: "Event name data incorrect. Only letters, numbers and space allowed.", backdrop: true});
                    return false;
                }
            }
            
            function checkMemberCompetitionResultFormValidation(){
                if(competitionMemberSelected){
                    if($.isNumeric($("#addcompetitionmemberhandicap").val())){
                        if($.isNumeric($("#addcompetitionmembernetscore").val())){
                            return true;
                        } else{
                            bootbox.alert({message: "Net score data incorrect. Only numbers allowed.", backdrop: true});
                            return false;
                        }
                    } else{
                        bootbox.alert({message:"Handicap data incorrect. Only numbers allowed.", backdrop: true});
                        return false;
                        }
                } else {
                    bootbox.alert({message: "Member name data incorrect. Choose member from the list.", backdrop: true});
                    return false;
                }
            }
            
            function checkEditMemberCompetitionResultFormValidation(){
                if(competitionEditMemberSelected){
                    if($.isNumeric($("#editcompetitionmemberhandicap").val())){
                        if($.isNumeric($("#editcompetitionmembernetscore").val())){
                            return true;
                        } else{
                            bootbox.alert({message: "Net score data incorrect. Only numbers allowed.", backdrop: true});
                            return false;
                        }
                    } else{
                        bootbox.alert({message:"Handicap data incorrect. Only numbers allowed.", backdrop: true});
                        return false;
                        }
                } else {
                    bootbox.alert({message: "Member name data incorrect. Choose member from the list.", backdrop: true});
                    return false;
                }
            }
            
            function checkAddSocietyEventFormValidation(){
                if(alphanumeric($("#addeventname").val(), true) && $("#addeventname").val().length > 0 ){
                    if(alphanumeric($("#addeventcourse").val(), true) && $("#addeventcourse").val().length > 0 ){
                        if(alphanumeric($("#addeventpostcode").val(), false) || $("#addeventpostcode").val().length == 0 ){
                            if($.isNumeric($("#addeventprice").val())){
                                if(alphanumeric($("#addeventwhatincluded").val(), true) || $("#addeventwhatincluded").val().length == 0 ){
                                    if($.isNumeric($("#addeventmaxparticipants").val()) || $("#addeventmaxparticipants").val().length == 0){
                                        if(alphanumeric($("#addevenorganiser").val(), true) && $("#addevenorganiser").val().length > 0 ){
                                            if($("#neweventteatime").val().length > 0){
                                                if($("#neweventdate").val().length > 0){
                                                    return true;
                                                }
                                                else {
                                                    bootbox.alert({message:"You need to choose event date.", backdrop: true});
                                                    return false; 
                                                }
                                            } else{
                                                bootbox.alert({message:"You need to choose first tee time.", backdrop: true});
                                                return false; 
                                            }
                                            return true;
                                        } else{
                                            bootbox.alert({message:"Event organiser data incorrect. Only letters, numbers and space allowed.", backdrop: true});
                                            return false; 
                                        }
                                    } else{
                                        bootbox.alert({message: "Max participants data incorrect. Only numbers allowed.", backdrop: true});
                                        return false;
                                    }
                                } else{
                                    bootbox.alert({message:"'What's included' data incorrect. Only letters and numbers allowed.", backdrop: true});
                                    return false;    
                                }
                            } else{
                                bootbox.alert({message: "Price data incorrect. Only numbers allowed.", backdrop: true});
                                return false;
                            }
                            
                        } else{
                            bootbox.alert({message:"Post code data incorrect. Only letters and numbers allowed.", backdrop: true});
                            return false;    
                        }
            
                    } else{
                        bootbox.alert({message:"Course data incorrect. Only letters, numbers and space allowed.", backdrop: true});
                        return false;
                        }
                } else {
                    bootbox.alert({message: "Event name data incorrect. Only letters, numbers and space allowed.", backdrop: true});
                    return false;
                }
            }
            
            function checkEditSocietyEventFormValidation(){
                if(alphanumeric($("#editeventname").val(), true) && $("#editeventname").val().length > 0 ){
                    if(alphanumeric($("#editeventcourse").val(), true) && $("#editeventcourse").val().length > 0 ){
                        if(alphanumeric($("#editeventpostcode").val(), false) || $("#editeventpostcode").val().length == 0 ){
                            if($.isNumeric($("#editeventprice").val())){
                                if(alphanumeric($("#editeventwhatincluded").val(), true) || $("#editeventwhatincluded").val().length == 0 ){
                                    if($.isNumeric($("#editeventmaxparticipants").val()) || $("#editeventmaxparticipants").val().length == 0){
                                        if(alphanumeric($("#editevenorganiser").val(), true) && $("#editevenorganiser").val().length > 0 ){
                                            if($("#editneweventteatime").val().length > 0){
                                                if($("#editneweventdate").val().length > 0){
                                                    return true;
                                                }
                                                else {
                                                    bootbox.alert({message:"You need to choose event date.", backdrop: true});
                                                    return false; 
                                                }
                                            } else{
                                                bootbox.alert({message:"You need to choose first tee time.", backdrop: true});
                                                return false; 
                                            }
                                            return true;
                                        } else{
                                            bootbox.alert({message:"Event organiser data incorrect. Only letters, numbers and space allowed.", backdrop: true});
                                            return false; 
                                        }
                                    } else{
                                        bootbox.alert({message: "Max participants data incorrect. Only numbers allowed.", backdrop: true});
                                        return false;
                                    }
                                } else{
                                    bootbox.alert({message:"'What's included' data incorrect. Only letters and numbers allowed.", backdrop: true});
                                    return false;    
                                }
                            } else{
                                bootbox.alert({message: "Price data incorrect. Only numbers allowed.", backdrop: true});
                                return false;
                            }
                            
                        } else{
                            bootbox.alert({message:"Post code data incorrect. Only letters and numbers allowed.", backdrop: true});
                            return false;    
                        }
            
                    } else{
                        bootbox.alert({message:"Course data incorrect. Only letters, numbers and space allowed.", backdrop: true});
                        return false;
                        }
                } else {
                    bootbox.alert({message: "Event name data incorrect. Only letters, numbers and space allowed.", backdrop: true});
                    return false;
                }
            }
            
            function getcommittee(){
                let arr =[];
                
                for(let i = 0, length = MEMBERS.length; i < length; i++){
                    if(MEMBERS[i]["committee"] == "true"){
                        arr.push(MEMBERS[i]);
                    }
                }
                return arr;
            }
            
            function updateCompetitionMemberList(){
                $('#addcompetitionmemberlist').empty();    
                
                arr =[];
                
                for(let i = 0, length = COMPETITION_RESULT.length; i < length; i++){
                    arr.push(COMPETITION_RESULT[i].member);
                }
                
                for(let i =0, length = MEMBERS.length; i < length; i++){
                    if(($.inArray(MEMBERS[i], arr)) == -1){
                       $('#addcompetitionmemberlist').append('<a class = "notop list-group-item text-center list-group-item-info" href="javascript:void(0)" id="'+i+'" >'+MEMBERS[i]["name"]+'</a>');
                    }
                }
            }
            
            
            function updateaditCompetitionMemberList(){
                $('#editaddcompetitionmemberlist').empty();    
                
                arr =[];
                
                for(let i = 0, length = EDIT_COMPETITION_RESULT.length; i < length; i++){
                    arr.push(EDIT_COMPETITION_RESULT[i].member["name"]);
                    console.log('AAAAAAAAAAA '+EDIT_COMPETITION_RESULT[i].member["name"]);
                }
                
                for(let i =0, length = MEMBERS.length; i < length; i++){
                    if(($.inArray(MEMBERS[i]["name"], arr)) == -1){
                       $('#editaddcompetitionmemberlist').append('<a class = "notop list-group-item text-center list-group-item-info" href="javascript:void(0)" id="'+i+'" >'+MEMBERS[i]["name"]+'</a>');
                    }
                }
            }
            
            function updateMemberPanels(i){
                
                $('#memberstable').find('tbody').append('<tr><td>'+MEMBERS[i]["name"]+'</td><td>'+MEMBERS[i]["handicapExact"]+'</td><td>'+Math.round(Number(MEMBERS[i]["handicapExact"]))+'</td><td>'+MEMBERS[i]["email"]+'</td><td>'+MEMBERS[i]["phone"]+'</td></tr>');
                        
                $('#editmemberslist').append('<a href="javascript:void(0)" class="list-group-item notop list-group-item-info" id="'+i+'">'+MEMBERS[i]["name"]+'</a><ul class="list-group well" style="display:none" id="member'+i+'"></ul><br>');
                        
                //edit panel - adding members information
                        
                $("#member"+i).append('<button id="deletemember" type="button" style="margin-top:20px" class="btn btn-danger btn-block">Delete Member</button>');                        
                        
                $("#member"+i).append('<label for="editmemberusername" style="margin-top:20px">Username:</label><input type="text" class="form-control list-group-item" id="editmemberusername" placeholder="'+MEMBERS[i]["username"]+'" value="'+MEMBERS[i]["username"]+'" readonly>');
                        
                $("#member"+i).append('<label for="editmembername" style="margin-top:20px">Member name:</label><input type="text" class="form-control list-group-item" id="editmembername" placeholder="'+MEMBERS[i]["name"]+'" value="'+MEMBERS[i]["name"]+'">');
                        
                $("#member"+i).append('<label for="editmemberhandicap" style="margin-top:20px">Handicap:</label><input type="text" class="form-control list-group-item" id="editmemberhandicap" placeholder="'+MEMBERS[i]["handicapExact"]+'"  value="'+MEMBERS[i]["handicapExact"]+'">');
                        
                $("#member"+i).append('<button id="editmember" type="button" style="margin-top:20px" class="btn btn-primary btn-block">Apply changes</button>');
                
                //add competition result panel
                
                $('#addcompetitionmemberlist').append('<a class = "notop list-group-item text-center list-group-item-info" href="javascript:void(0)" id="'+i+'" >'+MEMBERS[i]["name"]+'</a>');
            }
            
            
            function updateCompetitionTables(idx){
                $('#competitionresultsinfotable').find('tbody').empty();
                $('#competitionresultsscoretable').find('tbody').empty();
                
                if(idx > -1){
                    let month = Number(ALL_COMPETITION_RESULTS[idx]["month"]);
                    let day = Number(ALL_COMPETITION_RESULTS[idx]["day"]);
                    
                    $('#competitionresultsinfotable').find('tbody').append('<tr><td>Event:</td><td align="center">'+ALL_COMPETITION_RESULTS[idx]["eventname"]+'</td></tr>'+'<tr><td>Competition:</td><td align="center">'+ALL_COMPETITION_RESULTS[idx]["competitionname"]+'</td></tr>'+'<tr><td>Venue:</td><td align="center">'+ALL_COMPETITION_RESULTS[idx]["venue"]+'</td></tr>'+'<tr><td>Date of Competition:</td><td align="center">'+day+'/'+month+'/'+ALL_COMPETITION_RESULTS[idx]["year"]+'</td></tr>');
                    
                    let competitionResults = [];
                    let index = 0;
                    
                    for(let i = 0, length = ALL_COMPETITION_RESULTS.length; i < length; i++){
                        if(ALL_COMPETITION_RESULTS[i]["id"] == ALL_COMPETITION_RESULTS[idx]["id"]){
                            competitionResults[index] = ALL_COMPETITION_RESULTS[i];
                            index++;
                        }
                    }
                    console.log(competitionResults[0]["netscore"]);
                    competitionResults.sort(compareCompetitionNetScore);
                    console.log(competitionResults[0]["netscore"]);
                    for(let i = 0, length = competitionResults.length; i < length; i++){
                        $('#competitionresultsscoretable').find('tbody').append('<tr><td>'+competitionResults[i]["member"]["name"] +'</td><td>'+ competitionResults[i]["handicap"] +'</td><td>'+ competitionResults[i]["netscore"] + '</td></tr>');
                    }
                    
                } else{
                }
            }
            
            function updatePlayerOfTheYearTable(year){
                $('#playeroftheyeartable').find('tbody').empty();
                $('#playeroftheyeartable').find('thead').empty();
                
                let arr = getCompetitionIndexList();
                
                let yearCompetitions = [];
                let resultArr = [];
                
                for(let i=0, length = arr.length; i < length; i++){
                    if(ALL_COMPETITION_RESULTS[arr[i]]['year'] == year){
                        yearCompetitions.push(ALL_COMPETITION_RESULTS[arr[i]]["venue"]);
                        resultArr[ALL_COMPETITION_RESULTS[arr[i]]["venue"]] = [];
                    }
                }
                
                for(let i=0, length = ALL_COMPETITION_RESULTS.length; i < length; i++){
                    if($.inArray(ALL_COMPETITION_RESULTS[i]["venue"],yearCompetitions) > -1){
                        resultArr[ALL_COMPETITION_RESULTS[i]["venue"]][ALL_COMPETITION_RESULTS[i]["member"]["name"]] = ALL_COMPETITION_RESULTS[i]["netscore"];
                    }
                }
                
                $('#playeroftheyeartable').find('thead').append('<tr></tr>');
                $('#playeroftheyeartable').find('thead').find('tr').append('<th>Members Name</th>');
                
                for(let i=0, length = yearCompetitions.length; i < length; i++){
                    $('#playeroftheyeartable').find('thead').find('tr').append('<th>'+yearCompetitions[i]+'</th>');
                }
                
                
                
                $('#playeroftheyeartable').find('thead').find('tr').append('<th>Total (best 4)</th>');
                
                let totalResults = [];
                
                for(let i=0, length = MEMBERS.length; i < length; i++){
                    let score = [];
                    
                    for(let j=0, length = yearCompetitions.length; j < length; j++){
                        if(resultArr[yearCompetitions[j]][MEMBERS[i]["name"]]){
                            score.push(resultArr[yearCompetitions[j]][MEMBERS[i]["name"]]);
                        }
                    }
                    
                    totalResults.push({score : get4BestInOne(score), index: i});
                }
                
                totalResults.sort(compareTotalScore);
                
                for(let i=0, length = MEMBERS.length; i < length; i++){
                
                    $('#playeroftheyeartable').find('tbody').append('<tr></tr>');
                    $('#playeroftheyeartable > tbody > tr:last-child').append('<td>'+MEMBERS[totalResults[i]["index"]]["name"]+'</td>');
                    
                    for(let j=0, length = yearCompetitions.length; j < length; j++){
                        if(resultArr[yearCompetitions[j]][MEMBERS[totalResults[i]["index"]]["name"]]){
                            $('#playeroftheyeartable > tbody > tr:last-child').append('<td>'+resultArr[yearCompetitions[j]][MEMBERS[totalResults[i]["index"]]["name"]]+'</td>');
                        } else{
                            $('#playeroftheyeartable > tbody > tr:last-child').append('<td></td>');
                        }
                    }
                    
                    $('#playeroftheyeartable > tbody > tr:last-child').append('<td>'+totalResults[i]["score"]+'</td>');
                    //totalResults[i]["index"]    
                              
                }
                
            }
            
            function get4BestInOne(score){
                let sum = 0;
                let index = 0;
                let best = [];
                
                for(let i = 0; i < score.length; i++){
                    if(index < 4){
                        best[index] = score[i];
                        index++;
                    } else{
                        if(best[indexOfMin(best)] < score[i]){
                            best[indexOfMin(best)] = score[i];
                        }
                    }
                }
                
                for(let i = 0; i < best.length; i++){
                    sum += Number(best[i]); 
                }
                
                return sum;
            }
            
            function updateaditCompetitionTables(idx){
                //$('#editcompetitionresultsinfotable').find('tbody').empty();
                $('#editcompetitionresultlist').empty();
                $('#editcompetitionresultsscoretable').find('tbody').empty();
                
                if(idx > -1){
                    let month = Number(ALL_COMPETITION_RESULTS[idx]["month"]);
                    let day = Number(ALL_COMPETITION_RESULTS[idx]["day"]);
                    
                    $('#editcompetitioneventname').val(ALL_COMPETITION_RESULTS[idx]["eventname"]);
                    $('#editcompetitionname').val(ALL_COMPETITION_RESULTS[idx]["competitionname"]);
                    $('#editcompetitionvenue').val(ALL_COMPETITION_RESULTS[idx]["venue"]);
                    
                    $('#editcompetitiondate').datetimepicker("update", new Date(ALL_COMPETITION_RESULTS[idx]["year"], month-1, day,0,0,0,0));
                    
                   /* $('#editcompetitionresultsinfotable').find('tbody').append('<tr><td>Event:</td><td align="center">'+ALL_COMPETITION_RESULTS[idx]["eventname"]+'</td></tr>'+'<tr><td>Competition:</td><td align="center">'+ALL_COMPETITION_RESULTS[idx]["competitionname"]+'</td></tr>'+'<tr><td>Venue:</td><td align="center">'+ALL_COMPETITION_RESULTS[idx]["venue"]+'</td></tr>'+'<tr><td>Date of Competition:</td><td align="center">'+day+'/'+month+'/'+ALL_COMPETITION_RESULTS[idx]["year"]+'</td></tr>');*/
                    
                    let competitionResults = [];
                    let index = 0;
                    
                    for(let i = 0, length = ALL_COMPETITION_RESULTS.length; i < length; i++){
                        if(ALL_COMPETITION_RESULTS[i]["id"] == ALL_COMPETITION_RESULTS[idx]["id"]){
                            competitionResults[index] = ALL_COMPETITION_RESULTS[i];
                            index++;
                        }
                    }
                    
                    EDIT_COMPETITION_RESULT = competitionResults;
                    
                    updateaditCompetitionMemberList();
                    
                    
                    console.log('Result '+EDIT_COMPETITION_RESULT[0]["member"]["name"]);
                    
                  //  updateaditCompetitionMemberList();
                    
                    console.log(competitionResults[0]["netscore"]);
                    competitionResults.sort(compareCompetitionNetScore);
                    console.log(competitionResults[0]["netscore"]);
                    for(let i = 0, length = competitionResults.length; i < length; i++){
                        $('#editcompetitionresultsscoretable').find('tbody').append('<tr><td>'+competitionResults[i]["member"]["name"] +'</td><td>'+ competitionResults[i]["handicap"] +'</td><td>'+ competitionResults[i]["netscore"] + '</td></tr>');
                        
                        $('#editcompetitionresultlist').append('<a href="javascript:void(0)" class="list-group-item notop list-group-item-info" id="'+i+'">'+competitionResults[i]["member"]["name"]+'</a><ul class="list-group well" style="display:none" id="competitionresult'+i+'" data-member="'+competitionResults[i]["member"]["name"]+'"></ul><br>');
                        
                        //edit panel - adding members information
                        
                        $("#competitionresult"+i).append('<button id="deletemembercompetitionresult" type="button" style="margin-top:20px" class="btn btn-danger btn-block">Delete Member</button>');                        

                        $("#competitionresult"+i).append('<label for="editmembernetscorecompetitionresult" style="margin-top:20px">Member net score:</label><input type="text" class="form-control list-group-item" id="editmembernetscorecompetitionresult" placeholder="'+competitionResults[i]["netscore"]+'" value="'+competitionResults[i]["netscore"]+'">');

                        $("#competitionresult"+i).append('<label for="editmemberhandicapcompetitionresult" style="margin-top:20px">Member handicap:</label><input type="text" class="form-control list-group-item" id="editmemberhandicapcompetitionresult" placeholder="'+competitionResults[i]["handicap"]+'"  value="'+competitionResults[i]["handicap"]+'">');

                        $("#competitionresult"+i).append('<button id="editmembercompetitionresult" type="button" style="margin-top:20px" class="btn btn-primary btn-block">Apply changes</button>');
                    }
                    
                } else{
                    $('#editcompetitioneventname').val("");
                    $('#editcompetitionname').val("");
                    $('#editcompetitionvenue').val("");
                    $('#editnewcompetitiondate').val("");
                }
            }    
            
            function updateSocietyEventTable(idx){
                
                $('#societyeventstable').find('tbody').empty();
                
                if(idx > -1){
                    let month = Number(SOCIETY_EVENTS[idx]["month"]);
                    let day = Number(SOCIETY_EVENTS[idx]["day"]);
                    $('#societyeventstable').find('tbody').append('<tr><td>Event Name:</td><td align="center">'+SOCIETY_EVENTS[idx]["name"]+'</td></tr>'+'<tr><td>Course:</td><td align="center">'+SOCIETY_EVENTS[idx]["course"]+'</td></tr>'+'<tr><td>Post Code of Course:</td><td align="center">'+SOCIETY_EVENTS[idx]["postcode"]+'</td></tr>'+'<tr><td>Club or Course Website:</td><td align="center">'+SOCIETY_EVENTS[idx]["website"]+'</td></tr>'+'<tr><td>Date of Event:</td><td align="center">'+day+'/'+month+'/'+SOCIETY_EVENTS[idx]["year"]+'</td></tr>'+'<tr><td>First tee Time:</td><td align="center">'+SOCIETY_EVENTS[idx]["firstteatime"]+'</td></tr>'+'<tr><td>Price per Head:</td><td align="center">'+SOCIETY_EVENTS[idx]["price"]+'</td></tr>'+"<tr><td>What's included:</td><td align='center'>"+SOCIETY_EVENTS[idx]["included"]+'</td></tr>'+'<tr><td>Max Number of Participants:</td><td align="center">'+SOCIETY_EVENTS[idx]["maxplayers"]+'</td></tr>'+'<tr><td>Main Event Organiser:</td><td align="center">'+SOCIETY_EVENTS[idx]["organiser"]+'</td></tr>'+'<tr><td>Notes:</td><td align="center">'+SOCIETY_EVENTS[idx]["notes"]+'</td></tr>');
                } else{
                }

            }
            
            function updateaditSocietyEventForm(idx){
                if(idx > -1){
                    $('#editeventname').val(SOCIETY_EVENTS[idx]["name"]);
                    $('#editeventcourse').val(SOCIETY_EVENTS[idx]["course"]);
                    $('#editeventpostcode').val(SOCIETY_EVENTS[idx]["postcode"]);
                    $('#editeventclub').val(SOCIETY_EVENTS[idx]["website"]);
                    //$('#editeventdate').val(SOCIETY_EVENTS[index]["day"]+'/'+SOCIETY_EVENTS[index]["month"]+'/'+SOCIETY_EVENTS[index]["year"]);
                    $('#editeventprice').val(SOCIETY_EVENTS[idx]["price"]);
                    $('#editeventwhatincluded').val(SOCIETY_EVENTS[idx]["included"]);
                    $('#editeventmaxparticipants').val(SOCIETY_EVENTS[idx]["maxplayers"]);

                    $('#editeventdate').datetimepicker("update", new Date(SOCIETY_EVENTS[idx]["year"],Number(SOCIETY_EVENTS[idx]["month"])-1,SOCIETY_EVENTS[idx]["day"],0,0,0,0));

                    let str = SOCIETY_EVENTS[idx]["firstteatime"];
                   // let res = str.split(":");
                    //$('#editeventteatime').datetimepicker("update", new Date(0,0,0,res[0],res[1],0,0));

                    $('#editevenorganiser').val(SOCIETY_EVENTS[idx]["organiser"]);
                    $('#editeventnotes').val(SOCIETY_EVENTS[idx]["notes"]);
                } else{
                    $('#editeventname').val("");
                    $('#editeventcourse').val("");
                    $('#editeventpostcode').val("");
                    $('#editeventclub').val("");
                    $('#editeventprice').val("");
                    $('#editeventwhatincluded').val("");
                    $('#editeventmaxparticipants').val("");

                    $('#editneweventdate').val("");
                    $('#editneweventteatime').val("");

                    $('#editevenorganiser').val("");
                    $('#editeventnotes').val("");
                }

            }
            
            function updateCompetitionList(year){
                $('#competitionlist').empty();
                
                let arr = getCompetitionIndexList();
                
                for(let i=0, length = arr.length; i < length; i++){
                    if(ALL_COMPETITION_RESULTS[arr[i]]['year'] == year){
                        $('#competitionlist').append('<a class = "notop list-group-item text-center list-group-item-info" href="javascript:void(0)" id="'+arr[i]+'" >'+ALL_COMPETITION_RESULTS[arr[i]]["venue"]+'</a>');
                    }
                }
                
                $('#competitionlistbtn').text(year);
            }
            
            function updateaditCompetitionList(year){
                $('#editcompetitionlist').empty();
                
                let arr = getCompetitionIndexList();
                
                for(let i=0, length = arr.length; i < length; i++){
                    if(ALL_COMPETITION_RESULTS[arr[i]]['year'] == year){
                        $('#editcompetitionlist').append('<a class = "notop list-group-item text-center list-group-item-info" href="javascript:void(0)" id="'+arr[i]+'" >'+ALL_COMPETITION_RESULTS[arr[i]]["venue"]+'</a>');  
                    }
                }
                
                $('#editcompetitionlistbtn').text(year);
            }            
            
            function getCompetitionIndexList(){
                
                let arr =[];
                let id = -1;
                let k = []; 
                $.in
                
                for(let i=0, length = ALL_COMPETITION_RESULTS.length; i < length; i++){
                    if(($.inArray(ALL_COMPETITION_RESULTS[i]["id"] , k)) == -1){
                        k.push(ALL_COMPETITION_RESULTS[i]["id"]);
                        arr.push(i);
                    }
                }
                
                return arr;
            }
            
            function updateSocietyEventList(year){
                
                let arr = [];
                $('#eventlist').empty();
                console.log("update event");
                let currnentDate = new Date();
                let future = false;
                for(let i=0, length = SOCIETY_EVENTS.length; i < length; i++){
                    if(SOCIETY_EVENTS[i]['year'] == year){
                       if(currnentDate.getFullYear() <= SOCIETY_EVENTS[i]["year"]){
                           if(currnentDate.getMonth() <= SOCIETY_EVENTS[i]["month"]){
                               if(currnentDate.getDate() <= SOCIETY_EVENTS[i]["day"]){
                                   $('#eventlist').append('<a class = "notop list-group-item text-center list-group-item-success" href="javascript:void(0)" id="'+i+'" >'+SOCIETY_EVENTS[i]["name"]+'</a>');
                                   future = true;
                               }
                           }
                       }
                       if(future == false){
                            $('#eventlist').append('<a class = "notop list-group-item text-center list-group-item-info" href="javascript:void(0)" id="'+i+'" >'+SOCIETY_EVENTS[i]["name"]+'</a>');
                       }
                       future = false;
                    }
                }
                
                $('#eventlistbtn').text(year);
            }
            
            function updateaditSocietyEventList(year){
                let arr = [];
                $('#editeventlist').empty();
                console.log("update event");
                let future = false;
                let currnentDate = new Date();
                
                for(let i=0, length = SOCIETY_EVENTS.length; i < length; i++){
                    if(SOCIETY_EVENTS[i]['year'] == year){
                        if(currnentDate.getFullYear() <= SOCIETY_EVENTS[i]["year"]){
                           if(currnentDate.getMonth() <= SOCIETY_EVENTS[i]["month"]){
                               if(currnentDate.getDate() <= SOCIETY_EVENTS[i]["day"]){
                                  $('#editeventlist').append('<a class = "notop list-group-item text-center list-group-item-success" href="javascript:void(0)" id="'+i+'" >'+SOCIETY_EVENTS[i]["name"]+'</a>');
                                   future = true;
                               }
                           }
                       }
                       if(future == false){
                            $('#editeventlist').append('<a class = "notop list-group-item text-center list-group-item-info" href="javascript:void(0)" id="'+i+'" >'+SOCIETY_EVENTS[i]["name"]+'</a>');
                       }
                       future = false;
                    }
                }
                
                $('#editeventlistbtn').text(year);
            }
            
            function getMemberHandicap(membername){
                for(let i =0, length = MEMBERS.length; i < length; i++){     
                    if(MEMBERS[i]["name"] == membername){
                        return Math.round(MEMBERS[i]["handicapExact"]);
                    }
                }
                
                return 0;
            }
            getLastCompetitionIndex
 
            function getLastCompetitionIndex(){
                let arr = [];
                
                for(let i=0, length = ALL_COMPETITION_RESULTS.length; i < length; i++){
                    arr.push(Number(ALL_COMPETITION_RESULTS[i]['year']*10000)+Number(ALL_COMPETITION_RESULTS[i]['month']*100)+Number(ALL_COMPETITION_RESULTS[i]['day']));
                    console.log(ALL_COMPETITION_RESULTS[i]['year']);
                    console.log(ALL_COMPETITION_RESULTS[i]['month']);
                    console.log(ALL_COMPETITION_RESULTS[i]['year']);
                    console.log(Number(ALL_COMPETITION_RESULTS[i]['year']*10000)+Number(ALL_COMPETITION_RESULTS[i]['month']*100)+Number(ALL_COMPETITION_RESULTS[i]['day']));
                }
                
                return indexOfMax(arr);
            }
                        
            
            function getLastEventIndex(){
                let arr = [];
                
                for(let i=0, length = SOCIETY_EVENTS.length; i < length; i++){
                    arr.push(Number(SOCIETY_EVENTS[i]['year']*10000)+Number(SOCIETY_EVENTS[i]['month']*100)+Number(SOCIETY_EVENTS[i]['day']));
                    console.log(SOCIETY_EVENTS[i]['year']);
                    console.log(SOCIETY_EVENTS[i]['month']);
                    console.log(SOCIETY_EVENTS[i]['year']);
                    console.log(Number(SOCIETY_EVENTS[i]['year']*10000)+Number(SOCIETY_EVENTS[i]['month']*100)+Number(SOCIETY_EVENTS[i]['day']));
                }
                
                return indexOfMax(arr);
                
            }
            
            function getOldestEventIndex(){
                let arr = [];
                
                for(let i=0, length = SOCIETY_EVENTS.length; i < length; i++){
                    arr.push(Number(SOCIETY_EVENTS[i]['year']*10000)+Number(SOCIETY_EVENTS[i]['month']*100)+Number(SOCIETY_EVENTS[i]['day']));
                }
                
                return indexOfMin(arr);
            }
            
            function getLastCompetitionIndex(){
                let arr = [];
                
                for(let i=0, length = ALL_COMPETITION_RESULTS.length; i < length; i++){
                    arr.push(Number(ALL_COMPETITION_RESULTS[i]['year']*10000)+Number(ALL_COMPETITION_RESULTS[i]['month']*100)+Number(ALL_COMPETITION_RESULTS[i]['day']));
                }
                
                return indexOfMax(arr);
                
            }
            
            function getOldestCompetitionIndex(){
                let arr = [];
                
                for(let i=0, length = ALL_COMPETITION_RESULTS.length; i < length; i++){
                    arr.push(Number(ALL_COMPETITION_RESULTS[i]['year']*10000)+Number(ALL_COMPETITION_RESULTS[i]['month']*100)+Number(ALL_COMPETITION_RESULTS[i]['day']));
                }
                
                return indexOfMin(arr);
            }
            
            function indexOfMax(arr) {
                if (arr.length === 0) {
                    return -1;
                }

                let max = arr[0];
                let maxIndex = 0;

                for (let i = 1; i < arr.length; i++) {
                    if (arr[i] > max) {
                        maxIndex = i;
                        max = arr[i];
                    }
                }

                return maxIndex;
            }
            
            function indexOfMin(arr){
                if (arr.length === 0) {
                    return -1;
                }

                let index = 0;
                let value = arr[0];
                for (var i = 1; i < arr.length; i++) {
                  if (arr[i] < value) {
                    value = arr[i];
                    index = i;
                  }
                }
                
                return index;
            }
            
            function compareCompetitionNetScore(a,b){
                if(Number(a["netscore"]) < Number(b["netscore"]))
                    return 1;
                if (Number(a["netscore"]) > Number(b["netscore"]))
                    return -1;
                return 0;
            }
            
            function compareTotalScore(a,b){
                if(Number(a["score"]) < Number(b["score"]))
                    return 1;
                if (Number(a["score"]) > Number(b["score"]))
                    return -1;
                return 0;
            }            
            
            function compareMemberName(a,b) {
                if (a.name < b.name)
                    return -1;
                if (a.name > b.name)
                    return 1;
                return 0;
            }
            
            function sortMembersByName(){
                MEMBERS.sort(compareMemberName);
            }         
            
            function sortEvents(){
                SOCIETY_EVENTS.sort(compareEvents);
                activeEditEvent = -1;
                activeEvent  = -1;
            }
            
            function compareEvents(a,b) {
              if ((Number(a["year"]*1000)+Number(a["month"]*100)+Number(a["day"])) < (Number(b["year"]*1000)+Number(b["month"]*100)+Number(b["day"])) )
                return 1;
              if ((Number(a["year"]*1000)+Number(a["month"]*100)+Number(a["day"])) > (Number(b["year"]*1000)+Number(b["month"]*100)+Number(b["day"])) )
                return -1;
              return 0;
            }
        </script> 
    </body>
</html>