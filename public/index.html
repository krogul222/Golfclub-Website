<!DOCTYPE html>
<html>
    <head>
        <script src="js/jquery-3.2.1.min.js"></script>
        <script src="js/bootstrap.js"></script>
        <script src="js/placeholder.js"></script>
        <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
        <link rel="stylesheet" type="text/css" href="css/myStyle.css">
    </head>
    <body>
        <div id="wrap">
            <!-- Navigation bar, code is in menu.html-->
            <div id="nav-placeholder">
            </div> 

             <!-- Header Carousel, looped photos at top of the screen -->
            <header id="myCarousel" class="carousel slide" data-interval="10000" data-ride="carousel">

                 <!-- Indicators , carousel skeleton-->
                <ol class="carousel-indicators">
                    <li data-target="#myCarousel" data-slide-to="0" class='active'></li>
                    <li data-target="#myCarousel" data-slide-to="1"></li>
                    <li data-target="#myCarousel" data-slide-to="2"></li>
                </ol>

                <!-- Wrapper for slides -->
                <div class="carousel-inner">
                    <div class="item active">
                        <img src="img/Slide1.jpg">
                        <div class="carousel-caption">
                            <h1>Golf1</h1>
                        </div>
                    </div>

                    <div class="item">
                        <img src="img/Slide2.jpg">
                        <div class="carousel-caption">
                            <h1>Golf2</h1>
                        </div>
                    </div>

                    <div class="item ">
                        <img src="img/Slide3.jpg">
                        <div class="carousel-caption">
                            <h1>Golf3</h1>
                        </div>
                    </div>

                <!-- Controls -->
                <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                    <span class="icon-prev"></span>
                </a>
                <a class="right carousel-control" href="#myCarousel" data-slide="next">
                    <span class="icon-next"></span>
                </a>
                </div>
            </header>

              <!-- Let's get started frame-->

            <div class="container ">

                <div class="row" style="margin-top: 50px">
                    <div  class="col-md-3 text-center well" style="float:left">
                        <ul class="list-group" id="glofmenu">
                             <li class="list-group-item" id="membershiplisting"><a href="#">Membership</a></li>
                             <li class="list-group-item" id="committee"><a href="#">The Committee</a></li>
                             <li class="list-group-item"><a href="#">Society Constitution</a></li>
                             <li class="list-group-item"><a href="#">Society Events</a></li>
                             <li class="list-group-item"><a href="#">Competition Results</a></li>
                             <li class="list-group-item"><a href="#">Player of the Year</a></li>
                        </ul>
                    </div>
                        <div class="col-md-6 col-md-offset-1" >
                        <div id="welcome" class="text-center well">
                            <h1>Welcome to Nexperia Golf Society Home Page!</h1>
                        </div>
                        <div id="committeecontent" style="display:none">
                                <div class="well  text-center" >  <h1>The Committee</h1> 
                                <h4>Below is a listing of the current Society Committee. If you have any queries about your current handicap or any other specific enquiries then please direct them to the relevant committee member.</h4></div>
     
                              <table id="committeetable" class="table table-hover">
                                <thead>
                                  <tr>
                                    <th>Members Name</th>
                                    <th>Position</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                  </tr>
                                </thead>
                                <tbody>
                                    <tr></tr>
                                </tbody>
                              </table>
                        </div>
                            
                        <div id="membershiplistingcontent" style="display:none">
                            <div class="well  text-center" >
                                <h1>Membership Listing</h1>
                                <h4>Below is a current list of Members handicaps and contact information. If you have any queries about your current handicap or if you need to change your contact information then please get in touch with one of the society organisers. To view a members handicap record click on the persons name. For a group email list, scroll down to the bottom of the page. </h4>
                            </div>
                                <table id="memberstable" class="table table-hover">
                                <thead>
                                  <tr>
                                    <th>Members Name</th>
                                    <th>Handicap (Exact)</th>
                                    <th>Handicap (Playing)</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                  </tr>
                                </thead>
                                <tbody>
                                    <tr></tr>
                                </tbody>
                              </table>
                            </div>
                            
                            
                        </div>
                    </div>
                
            </div>


            <!-- About content-->

            <div class="container" id="about">
                <div class="row">

                </div>
            </div>
        </div>
        
        <footer>
             <!-- Footer - Contact content -->
            <div id="footer-placeholder">
            </div>
        </footer>
        <script>
            $(document).ready(function() {
                $('#myCarousel').carousel({
                interval: 10000
                })
                
                $("#glofmenu").on("click", "#committee", function(event){
                    console.log('clicked');
                     //$("#committeetable tr").remove();
                     $("#welcome").hide();
                     $("#membershiplistingcontent").hide();
                     $("#committeecontent").show();
                     if(committeDataLoaded == false){
                         socket.emit('dataRequest', "committee");  
                         committeDataLoaded = true;
                     }    
                     
                    });
                
                $("#glofmenu").on("click", "#membershiplisting", function(event){
                    console.log('clicked');
                     $("#welcome").hide();
                     $("#membershiplistingcontent").show();
                     $("#committeecontent").hide();
                    if(membersDataLoaded == false){
                        socket.emit('dataRequest', "membershiplisting");  
                        membersDataLoaded = true;
                     }    
                    });
                
            });  
        </script>
        
        <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script> 
        
        <script> 
            let socket = io(); 
            var committeDataLoaded = false;
            var membersDataLoaded = false;
            
            socket.on('committeeData', function(data){ 
                $(document).ready(function() {
                    for(let i =0, length = data.length; i < length; i++){
                       $('#committeetable tr:last').after('<tr><td>'+data[i]["name"]+'</td><td>'+data[i]["position"]+'</td><td>'+data[i]["email"]+'</td><td>'+data[i]["phone"]+'</td></tr>'); 
                    }
                });
                                  
            }); 
            
            socket.on('membershiplistingData', function(data){ 
                $(document).ready(function() {
                    for(let i =0, length = data.length; i < length; i++){
                       $('#memberstable tr:last').after('<tr><td>'+data[i]["name"]+'</td><td>'+data[i]["handicapExact"]+'</td><td>'+data[i]["handicapPlaying"]+'</td><td>'+data[i]["email"]+'</td><td>'+data[i]["phone"]+'</td></tr>'); 
                    }
                });
                                  
            }); 

            
        </script> 
        
    </body>
</html>